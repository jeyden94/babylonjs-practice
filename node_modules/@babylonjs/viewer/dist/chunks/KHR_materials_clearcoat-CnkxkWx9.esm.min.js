import{GLTFLoader as e}from"./glTFLoader-wHGixHtC.esm.min.js";import{bL as a,bK as o}from"./index-1dDxZ_0d.esm.min.js";import"./bone-rpjVhoW9.esm.min.js";import"./skeleton-BuLyjIk1.esm.min.js";import"./rawTexture-DNIIHHuO.esm.min.js";import"./assetContainer-Dam1dL5M.esm.min.js";import"./objectModelMapping-DtrR_R-D.esm.min.js";const t="KHR_materials_clearcoat";class r{constructor(e){this.name=t,this.order=190,this._loader=e,this.enabled=this._loader.isExtensionUsed(t)}dispose(){this._loader=null}loadMaterialPropertiesAsync(a,o,t){return e.LoadExtensionAsync(a,o,this.name,(async(e,r)=>{const s=new Array;s.push(this._loader.loadMaterialPropertiesAsync(a,o,t)),s.push(this._loadClearCoatPropertiesAsync(e,r,t)),await Promise.all(s)}))}_loadClearCoatPropertiesAsync(e,a,o){const t=this._loader._getOrCreateMaterialAdapter(o),r=new Array;return t.configureCoat(),t.coatWeight=void 0!==a.clearcoatFactor?a.clearcoatFactor:0,t.coatRoughness=void 0!==a.clearcoatRoughnessFactor?a.clearcoatRoughnessFactor:0,a.clearcoatTexture&&r.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatTexture`,a.clearcoatTexture,(e=>{e.name=`${o.name} (ClearCoat)`,t.coatWeightTexture=e}))),a.clearcoatRoughnessTexture&&(a.clearcoatRoughnessTexture.nonColorData=!0,r.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatRoughnessTexture`,a.clearcoatRoughnessTexture,(e=>{e.name=`${o.name} (ClearCoat Roughness)`,t.coatRoughnessTexture=e})))),a.clearcoatNormalTexture&&(a.clearcoatNormalTexture.nonColorData=!0,r.push(this._loader.loadTextureInfoAsync(`${e}/clearcoatNormalTexture`,a.clearcoatNormalTexture,(e=>{e.name=`${o.name} (ClearCoat Normal)`,t.geometryCoatNormalTexture=e,null!=a.clearcoatNormalTexture?.scale&&(t.geometryCoatNormalTextureScale=a.clearcoatNormalTexture.scale)}))),t.setNormalMapInversions(!o.getScene().useRightHandedSystem,o.getScene().useRightHandedSystem)),Promise.all(r).then((()=>{}))}}a(t),o(t,!0,(e=>new r(e)));export{r as KHR_materials_clearcoat};
//# sourceMappingURL=KHR_materials_clearcoat-CnkxkWx9.esm.min.js.map
