{"version":3,"file":"openpbrMaterial-CkEhnk4i.esm.min.js","sources":["../../../../../dev/core/dist/Materials/PBR/openpbrMaterial.js"],"sourcesContent":["import { __decorate } from \"tslib\";\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { serialize, expandToProperty, addAccessorsForMaterialProperty } from \"../../Misc/decorators\";\nimport { GetEnvironmentBRDFTexture, GetEnvironmentFuzzBRDFTexture } from \"../../Misc/brdfTextureTools\";\nimport { Scene } from \"../../scene\";\nimport { Color3 } from \"../../Maths/math.color\";\nimport { ImageProcessingConfiguration } from \"../imageProcessingConfiguration\";\nimport { Texture } from \"../Textures/texture\";\nimport { RegisterClass } from \"../../Misc/typeStore\";\nimport { Material } from \"../material\";\nimport { SerializationHelper } from \"../../Misc/decorators.serialization\";\nimport { MaterialDefines } from \"../materialDefines\";\nimport { ImageProcessingDefinesMixin } from \"../imageProcessingConfiguration.defines\";\nimport { EffectFallbacks } from \"../effectFallbacks\";\nimport { AddClipPlaneUniforms, BindClipPlane } from \"../clipPlaneMaterialHelper\";\nimport { BindBonesParameters, BindFogParameters, BindLights, BindLogDepth, BindMorphTargetParameters, BindTextureMatrix, BindIBLParameters, BindIBLSamplers, HandleFallbacksForShadows, PrepareAttributesForBakedVertexAnimation, PrepareAttributesForBones, PrepareAttributesForInstances, PrepareAttributesForMorphTargets, PrepareDefinesForAttributes, PrepareDefinesForFrameBoundValues, PrepareDefinesForLights, PrepareDefinesForIBL, PrepareDefinesForMergedUV, PrepareDefinesForMisc, PrepareDefinesForMultiview, PrepareDefinesForOIT, PrepareDefinesForPrePass, PrepareUniformsAndSamplersList, PrepareUniformsAndSamplersForIBL, PrepareUniformLayoutForIBL, } from \"../materialHelper.functions\";\nimport { Constants } from \"../../Engines/constants\";\nimport { VertexBuffer } from \"../../Buffers/buffer\";\nimport { MaterialHelperGeometryRendering } from \"../materialHelper.geometryrendering\";\nimport { PrePassConfiguration } from \"../prePassConfiguration\";\nimport { MaterialFlags } from \"../materialFlags\";\nimport { Logger } from \"core/Misc/logger\";\nimport { UVDefinesMixin } from \"../uv.defines\";\nimport { Vector2, Vector4, TmpVectors } from \"core/Maths/math.vector\";\nimport { ImageProcessingMixin } from \"../imageProcessing\";\nimport { PushMaterial } from \"../pushMaterial\";\nimport { SmartArray } from \"../../Misc/smartArray\";\nimport { Tools } from \"../../Misc/tools\";\nconst onCreatedEffectParameters = { effect: null, subMesh: null };\nclass Uniform {\n    populateVectorFromLinkedProperties(vector) {\n        const destinationSize = vector.dimension[0];\n        for (const propKey in this.linkedProperties) {\n            const prop = this.linkedProperties[propKey];\n            const sourceSize = prop.numComponents;\n            if (destinationSize < sourceSize || prop.targetUniformComponentOffset > destinationSize - sourceSize) {\n                if (sourceSize == 1) {\n                    Logger.Error(`Float property ${prop.name} has an offset that is too large.`);\n                }\n                else {\n                    Logger.Error(`Vector${sourceSize} property ${prop.name} won't fit in Vector${destinationSize} or has an offset that is too large.`);\n                }\n                return;\n            }\n            if (typeof prop.value === \"number\") {\n                Uniform._tmpArray[prop.targetUniformComponentOffset] = prop.value;\n            }\n            else {\n                prop.value.toArray(Uniform._tmpArray, prop.targetUniformComponentOffset);\n            }\n        }\n        vector.fromArray(Uniform._tmpArray);\n    }\n    constructor(name, componentNum) {\n        this.linkedProperties = {};\n        this.name = name;\n        this.numComponents = componentNum;\n    }\n}\nUniform._tmpArray = [0, 0, 0, 0];\n/**\n * Defines a property for the OpenPBRMaterial.\n */\nclass Property {\n    /**\n     * Creates a new Property instance.\n     * @param name The name of the property in the shader\n     * @param defaultValue The default value of the property\n     * @param targetUniformName The name of the property in the shader uniform block\n     * @param targetUniformComponentNum The number of components in the target uniform. All properties that are\n     * packed into the same uniform must agree on the size of the target uniform.\n     * @param targetUniformComponentOffset The offset in the uniform where this property will be packed.\n     */\n    constructor(name, defaultValue, targetUniformName, targetUniformComponentNum, targetUniformComponentOffset = 0) {\n        // public includeAlphaFromProp: string = \"\";\n        /**\n         * If not given a type, there will be no uniform defined for this property and\n         * it will be assumed that the value will be packed into the already existing \"uniformName\" uniform.\n         */\n        this.targetUniformComponentNum = 4; // Default to vec4\n        this.targetUniformComponentOffset = 0;\n        this.name = name;\n        this.targetUniformName = targetUniformName;\n        this.defaultValue = defaultValue;\n        this.value = defaultValue;\n        this.targetUniformComponentNum = targetUniformComponentNum;\n        this.targetUniformComponentOffset = targetUniformComponentOffset;\n    }\n    /**\n     * Returns the number of components of the property based on its default value type.\n     */\n    get numComponents() {\n        if (typeof this.defaultValue === \"number\") {\n            return 1;\n        }\n        return this.defaultValue.dimension[0];\n    }\n}\nclass Sampler {\n    /**\n     * The name of the sampler used in the shader.\n     * If this naming changes, we'll also need to change:\n     * - samplerFragmentDeclaration.fx\n     * - openpbr.fragment.fx\n     */\n    get samplerName() {\n        return this.samplerPrefix + \"Sampler\";\n    }\n    /**\n     * The name of the sampler info used in the shader.\n     * If this naming changes, we'll also need to change:\n     * - openpbr.vertex.fx\n     * - openpbr.fragment.fx\n     */\n    get samplerInfoName() {\n        return \"v\" + this.samplerPrefix.charAt(0).toUpperCase() + this.samplerPrefix.slice(1) + \"Infos\";\n    }\n    /**\n     * The name of the matrix used for this sampler in the shader.\n     * If this naming changes, we'll also need to change:\n     * - materialHelper.functions.BindTextureMatrix\n     * - samplerVertexImplementation.fx\n     * - openpbr.fragment.fx\n     */\n    get samplerMatrixName() {\n        return this.samplerPrefix + \"Matrix\";\n    }\n    /**\n     * Creates a new Sampler instance.\n     * @param name The name of the texture property\n     * @param samplerPrefix The prefix used for the name of the sampler in the shader\n     * @param textureDefine The define used in the shader for this sampler\n     */\n    constructor(name, samplerPrefix, textureDefine) {\n        this.value = null; // Texture value, default to null\n        this.samplerPrefix = \"\"; // The name of the sampler in the shader\n        this.textureDefine = \"\"; // The define used in the shader for this sampler\n        this.name = name;\n        this.samplerPrefix = samplerPrefix;\n        this.textureDefine = textureDefine;\n    }\n}\nclass OpenPBRMaterialDefinesBase extends UVDefinesMixin(MaterialDefines) {\n}\n/**\n * Manages the defines for the PBR Material.\n * @internal\n */\nexport class OpenPBRMaterialDefines extends ImageProcessingDefinesMixin(OpenPBRMaterialDefinesBase) {\n    /**\n     * Initializes the PBR Material defines.\n     * @param externalProperties The external properties\n     */\n    constructor(externalProperties) {\n        super(externalProperties);\n        this.NUM_SAMPLES = \"0\";\n        this.REALTIME_FILTERING = false;\n        this.IBL_CDF_FILTERING = false;\n        this.VERTEXCOLOR = false;\n        this.BAKED_VERTEX_ANIMATION_TEXTURE = false;\n        this.VERTEXALPHA = false;\n        this.ALPHATEST = false;\n        this.DEPTHPREPASS = false;\n        this.ALPHABLEND = false;\n        this.ALPHA_FROM_BASE_COLOR_TEXTURE = false;\n        this.ALPHATESTVALUE = \"0.5\";\n        this.PREMULTIPLYALPHA = false;\n        this.REFLECTIVITY_GAMMA = false;\n        this.REFLECTIVITYDIRECTUV = 0;\n        this.SPECULARTERM = false;\n        this.LODBASEDMICROSFURACE = true;\n        this.METALLICWORKFLOW = true;\n        this.ROUGHNESSSTOREINMETALMAPALPHA = false;\n        this.ROUGHNESSSTOREINMETALMAPGREEN = false;\n        this.METALLNESSSTOREINMETALMAPBLUE = false;\n        this.AOSTOREINMETALMAPRED = false;\n        this.SPECULAR_WEIGHT_IN_ALPHA = false;\n        this.SPECULAR_WEIGHT_FROM_SPECULAR_COLOR_TEXTURE = false;\n        this.SPECULAR_ROUGHNESS_ANISOTROPY_FROM_TANGENT_TEXTURE = false;\n        this.COAT_ROUGHNESS_FROM_GREEN_CHANNEL = false;\n        this.COAT_ROUGHNESS_ANISOTROPY_FROM_TANGENT_TEXTURE = false;\n        this.USE_GLTF_STYLE_ANISOTROPY = false;\n        this.THIN_FILM_THICKNESS_FROM_THIN_FILM_TEXTURE = false;\n        this.FUZZ_ROUGHNESS_FROM_TEXTURE_ALPHA = false;\n        this.ENVIRONMENTBRDF = false;\n        this.ENVIRONMENTBRDF_RGBD = false;\n        this.FUZZENVIRONMENTBRDF = false;\n        this.NORMAL = false;\n        this.TANGENT = false;\n        this.OBJECTSPACE_NORMALMAP = false;\n        this.PARALLAX = false;\n        this.PARALLAX_RHS = false;\n        this.PARALLAXOCCLUSION = false;\n        this.NORMALXYSCALE = true;\n        /**\n         * Enables anisotropic logic. Still needed because it's used in pbrHelperFunctions\n         */\n        this.ANISOTROPIC = false;\n        /**\n         * Tells the shader to use OpenPBR's anisotropic roughness remapping\n         */\n        this.ANISOTROPIC_OPENPBR = true;\n        /**\n         * Tells the shader to apply anisotropy to the base layer\n         */\n        this.ANISOTROPIC_BASE = false;\n        /**\n         * Tells the shader to apply anisotropy to the coat layer\n         */\n        this.ANISOTROPIC_COAT = false;\n        /**\n         * Number of samples to use for the fuzz IBL lighting calculations\n         */\n        this.FUZZ_IBL_SAMPLES = 6;\n        /**\n         * Tells the shader to enable the fuzz layer\n         */\n        this.FUZZ = false;\n        /**\n         * Tells the shader to enable the thin film layer\n         */\n        this.THIN_FILM = false;\n        /**\n         * Tells the shader to enable the legacy iridescence code\n         * Iridescence is the name of thin film interference in the PBR material.\n         */\n        this.IRIDESCENCE = false;\n        this.REFLECTION = false;\n        this.REFLECTIONMAP_3D = false;\n        this.REFLECTIONMAP_SPHERICAL = false;\n        this.REFLECTIONMAP_PLANAR = false;\n        this.REFLECTIONMAP_CUBIC = false;\n        this.USE_LOCAL_REFLECTIONMAP_CUBIC = false;\n        this.REFLECTIONMAP_PROJECTION = false;\n        this.REFLECTIONMAP_SKYBOX = false;\n        this.REFLECTIONMAP_EXPLICIT = false;\n        this.REFLECTIONMAP_EQUIRECTANGULAR = false;\n        this.REFLECTIONMAP_EQUIRECTANGULAR_FIXED = false;\n        this.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED = false;\n        this.INVERTCUBICMAP = false;\n        this.USESPHERICALFROMREFLECTIONMAP = false;\n        this.USEIRRADIANCEMAP = false;\n        this.USE_IRRADIANCE_DOMINANT_DIRECTION = false;\n        this.USESPHERICALINVERTEX = false;\n        this.REFLECTIONMAP_OPPOSITEZ = false;\n        this.LODINREFLECTIONALPHA = false;\n        this.GAMMAREFLECTION = false;\n        this.RGBDREFLECTION = false;\n        this.RADIANCEOCCLUSION = false;\n        this.HORIZONOCCLUSION = false;\n        this.INSTANCES = false;\n        this.THIN_INSTANCES = false;\n        this.INSTANCESCOLOR = false;\n        this.PREPASS = false;\n        this.PREPASS_COLOR = false;\n        this.PREPASS_COLOR_INDEX = -1;\n        this.PREPASS_IRRADIANCE = false;\n        this.PREPASS_IRRADIANCE_INDEX = -1;\n        this.PREPASS_ALBEDO = false;\n        this.PREPASS_ALBEDO_INDEX = -1;\n        this.PREPASS_ALBEDO_SQRT = false;\n        this.PREPASS_ALBEDO_SQRT_INDEX = -1;\n        this.PREPASS_DEPTH = false;\n        this.PREPASS_DEPTH_INDEX = -1;\n        this.PREPASS_SCREENSPACE_DEPTH = false;\n        this.PREPASS_SCREENSPACE_DEPTH_INDEX = -1;\n        this.PREPASS_NORMALIZED_VIEW_DEPTH = false;\n        this.PREPASS_NORMALIZED_VIEW_DEPTH_INDEX = -1;\n        this.PREPASS_NORMAL = false;\n        this.PREPASS_NORMAL_INDEX = -1;\n        this.PREPASS_NORMAL_WORLDSPACE = false;\n        this.PREPASS_WORLD_NORMAL = false;\n        this.PREPASS_WORLD_NORMAL_INDEX = -1;\n        this.PREPASS_POSITION = false;\n        this.PREPASS_POSITION_INDEX = -1;\n        this.PREPASS_LOCAL_POSITION = false;\n        this.PREPASS_LOCAL_POSITION_INDEX = -1;\n        this.PREPASS_VELOCITY = false;\n        this.PREPASS_VELOCITY_INDEX = -1;\n        this.PREPASS_VELOCITY_LINEAR = false;\n        this.PREPASS_VELOCITY_LINEAR_INDEX = -1;\n        this.PREPASS_REFLECTIVITY = false;\n        this.PREPASS_REFLECTIVITY_INDEX = -1;\n        this.SCENE_MRT_COUNT = 0;\n        this.NUM_BONE_INFLUENCERS = 0;\n        this.BonesPerMesh = 0;\n        this.BONETEXTURE = false;\n        this.BONES_VELOCITY_ENABLED = false;\n        this.NONUNIFORMSCALING = false;\n        this.MORPHTARGETS = false;\n        this.MORPHTARGETS_POSITION = false;\n        this.MORPHTARGETS_NORMAL = false;\n        this.MORPHTARGETS_TANGENT = false;\n        this.MORPHTARGETS_UV = false;\n        this.MORPHTARGETS_UV2 = false;\n        this.MORPHTARGETS_COLOR = false;\n        this.MORPHTARGETTEXTURE_HASPOSITIONS = false;\n        this.MORPHTARGETTEXTURE_HASNORMALS = false;\n        this.MORPHTARGETTEXTURE_HASTANGENTS = false;\n        this.MORPHTARGETTEXTURE_HASUVS = false;\n        this.MORPHTARGETTEXTURE_HASUV2S = false;\n        this.MORPHTARGETTEXTURE_HASCOLORS = false;\n        this.NUM_MORPH_INFLUENCERS = 0;\n        this.MORPHTARGETS_TEXTURE = false;\n        this.USEPHYSICALLIGHTFALLOFF = false;\n        this.USEGLTFLIGHTFALLOFF = false;\n        this.TWOSIDEDLIGHTING = false;\n        this.MIRRORED = false;\n        this.SHADOWFLOAT = false;\n        this.CLIPPLANE = false;\n        this.CLIPPLANE2 = false;\n        this.CLIPPLANE3 = false;\n        this.CLIPPLANE4 = false;\n        this.CLIPPLANE5 = false;\n        this.CLIPPLANE6 = false;\n        this.POINTSIZE = false;\n        this.FOG = false;\n        this.LOGARITHMICDEPTH = false;\n        this.CAMERA_ORTHOGRAPHIC = false;\n        this.CAMERA_PERSPECTIVE = false;\n        this.AREALIGHTSUPPORTED = true;\n        this.FORCENORMALFORWARD = false;\n        this.SPECULARAA = false;\n        this.UNLIT = false;\n        this.DECAL_AFTER_DETAIL = false;\n        this.DEBUGMODE = 0;\n        this.CLUSTLIGHT_SLICES = 0;\n        this.CLUSTLIGHT_BATCH = 0;\n        // BRDF defines\n        this.BRDF_V_HEIGHT_CORRELATED = true;\n        this.MS_BRDF_ENERGY_CONSERVATION = true;\n        this.SPHERICAL_HARMONICS = true;\n        this.SPECULAR_GLOSSINESS_ENERGY_CONSERVATION = true;\n        this.MIX_IBL_RADIANCE_WITH_IRRADIANCE = true;\n        this.LEGACY_SPECULAR_ENERGY_CONSERVATION = false;\n        this.BASE_DIFFUSE_MODEL = Constants.MATERIAL_DIFFUSE_MODEL_E_OREN_NAYAR;\n        this.DIELECTRIC_SPECULAR_MODEL = Constants.MATERIAL_DIELECTRIC_SPECULAR_MODEL_OPENPBR;\n        this.CONDUCTOR_SPECULAR_MODEL = Constants.MATERIAL_CONDUCTOR_SPECULAR_MODEL_OPENPBR;\n        this.rebuild();\n    }\n    /**\n     * Resets the PBR Material defines.\n     */\n    reset() {\n        super.reset();\n        this.ALPHATESTVALUE = \"0.5\";\n        this.NORMALXYSCALE = true;\n    }\n}\nclass OpenPBRMaterialBase extends ImageProcessingMixin(PushMaterial) {\n}\n/**\n * A Physically based material that follows the specification of OpenPBR.\n *\n * For more information, please refer to the documentation :\n * https://academysoftwarefoundation.github.io/OpenPBR/index.html\n */\nexport class OpenPBRMaterial extends OpenPBRMaterialBase {\n    /**\n     * Defines the angle of the tangent of the material's geometry. Used only for anisotropic reflections.\n     * See OpenPBR's specs for geometry_tangent\n     */\n    get geometryTangentAngle() {\n        return Math.atan2(this.geometryTangent.y, this.geometryTangent.x);\n    }\n    set geometryTangentAngle(value) {\n        this.geometryTangent = new Vector2(Math.cos(value), Math.sin(value));\n    }\n    /**\n     * Defines the angle of the tangent of the material's coat layer.\n     */\n    get geometryCoatTangentAngle() {\n        return Math.atan2(this.geometryCoatTangent.y, this.geometryCoatTangent.x);\n    }\n    /**\n     * Defines the angle of the tangent of the material's coat layer.\n     */\n    set geometryCoatTangentAngle(value) {\n        this.geometryCoatTangent = new Vector2(Math.cos(value), Math.sin(value));\n    }\n    /**\n     * BJS is using an hardcoded light falloff based on a manually sets up range.\n     * In PBR, one way to represents the falloff is to use the inverse squared root algorithm.\n     * This parameter can help you switch back to the BJS mode in order to create scenes using both materials.\n     */\n    get usePhysicalLightFalloff() {\n        return this._lightFalloff === Material.LIGHTFALLOFF_PHYSICAL;\n    }\n    /**\n     * BJS is using an hardcoded light falloff based on a manually sets up range.\n     * In PBR, one way to represents the falloff is to use the inverse squared root algorithm.\n     * This parameter can help you switch back to the BJS mode in order to create scenes using both materials.\n     */\n    set usePhysicalLightFalloff(value) {\n        if (value !== this.usePhysicalLightFalloff) {\n            // Ensure the effect will be rebuilt.\n            this._markAllSubMeshesAsTexturesDirty();\n            if (value) {\n                this._lightFalloff = Material.LIGHTFALLOFF_PHYSICAL;\n            }\n            else {\n                this._lightFalloff = Material.LIGHTFALLOFF_STANDARD;\n            }\n        }\n    }\n    /**\n     * In order to support the falloff compatibility with gltf, a special mode has been added\n     * to reproduce the gltf light falloff.\n     */\n    get useGLTFLightFalloff() {\n        return this._lightFalloff === Material.LIGHTFALLOFF_GLTF;\n    }\n    /**\n     * In order to support the falloff compatibility with gltf, a special mode has been added\n     * to reproduce the gltf light falloff.\n     */\n    set useGLTFLightFalloff(value) {\n        if (value !== this.useGLTFLightFalloff) {\n            // Ensure the effect will be rebuilt.\n            this._markAllSubMeshesAsTexturesDirty();\n            if (value) {\n                this._lightFalloff = Material.LIGHTFALLOFF_GLTF;\n            }\n            else {\n                this._lightFalloff = Material.LIGHTFALLOFF_STANDARD;\n            }\n        }\n    }\n    /**\n     * Enables realtime filtering on the texture.\n     */\n    get realTimeFiltering() {\n        return this._realTimeFiltering;\n    }\n    set realTimeFiltering(b) {\n        this._realTimeFiltering = b;\n        this.markAsDirty(Constants.MATERIAL_TextureDirtyFlag);\n    }\n    /**\n     * Quality switch for realtime filtering\n     */\n    get realTimeFilteringQuality() {\n        return this._realTimeFilteringQuality;\n    }\n    set realTimeFilteringQuality(n) {\n        this._realTimeFilteringQuality = n;\n        this.markAsDirty(Constants.MATERIAL_TextureDirtyFlag);\n    }\n    /**\n     * The number of samples used to compute the fuzz IBL lighting.\n     */\n    get fuzzSampleNumber() {\n        return this._fuzzSampleNumber;\n    }\n    set fuzzSampleNumber(n) {\n        this._fuzzSampleNumber = n;\n        this.markAsDirty(Constants.MATERIAL_TextureDirtyFlag);\n    }\n    /**\n     * Can this material render to several textures at once\n     */\n    get canRenderToMRT() {\n        return true;\n    }\n    /**\n     * Instantiates a new OpenPBRMaterial instance.\n     *\n     * @param name The material name\n     * @param scene The scene the material will be use in.\n     * @param forceGLSL Use the GLSL code generation for the shader (even on WebGPU). Default is false\n     */\n    constructor(name, scene, forceGLSL = false) {\n        super(name, scene, undefined, forceGLSL || OpenPBRMaterial.ForceGLSL);\n        this._baseWeight = new Property(\"base_weight\", 1, \"vBaseWeight\", 1);\n        this._baseWeightTexture = new Sampler(\"base_weight\", \"baseWeight\", \"BASE_WEIGHT\");\n        this._baseColor = new Property(\"base_color\", Color3.White(), \"vBaseColor\", 4);\n        this._baseColorTexture = new Sampler(\"base_color\", \"baseColor\", \"BASE_COLOR\");\n        this._baseDiffuseRoughness = new Property(\"base_diffuse_roughness\", 0, \"vBaseDiffuseRoughness\", 1);\n        this._baseDiffuseRoughnessTexture = new Sampler(\"base_diffuse_roughness\", \"baseDiffuseRoughness\", \"BASE_DIFFUSE_ROUGHNESS\");\n        this._baseMetalness = new Property(\"base_metalness\", 0, \"vReflectanceInfo\", 4, 0);\n        this._baseMetalnessTexture = new Sampler(\"base_metalness\", \"baseMetalness\", \"BASE_METALNESS\");\n        this._specularWeight = new Property(\"specular_weight\", 1, \"vReflectanceInfo\", 4, 3);\n        this._specularWeightTexture = new Sampler(\"specular_weight\", \"specularWeight\", \"SPECULAR_WEIGHT\");\n        this._specularColor = new Property(\"specular_color\", Color3.White(), \"vSpecularColor\", 4);\n        this._specularColorTexture = new Sampler(\"specular_color\", \"specularColor\", \"SPECULAR_COLOR\");\n        this._specularRoughness = new Property(\"specular_roughness\", 0.3, \"vReflectanceInfo\", 4, 1);\n        this._specularRoughnessTexture = new Sampler(\"specular_roughness\", \"specularRoughness\", \"SPECULAR_ROUGHNESS\");\n        this._specularRoughnessAnisotropy = new Property(\"specular_roughness_anisotropy\", 0, \"vSpecularAnisotropy\", 3, 2);\n        this._specularRoughnessAnisotropyTexture = new Sampler(\"specular_roughness_anisotropy\", \"specularRoughnessAnisotropy\", \"SPECULAR_ROUGHNESS_ANISOTROPY\");\n        this._specularIor = new Property(\"specular_ior\", 1.5, \"vReflectanceInfo\", 4, 2);\n        this._coatWeight = new Property(\"coat_weight\", 0.0, \"vCoatWeight\", 1, 0);\n        this._coatWeightTexture = new Sampler(\"coat_weight\", \"coatWeight\", \"COAT_WEIGHT\");\n        this._coatColor = new Property(\"coat_color\", Color3.White(), \"vCoatColor\", 3, 0);\n        this._coatColorTexture = new Sampler(\"coat_color\", \"coatColor\", \"COAT_COLOR\");\n        this._coatRoughness = new Property(\"coat_roughness\", 0.0, \"vCoatRoughness\", 1, 0);\n        this._coatRoughnessTexture = new Sampler(\"coat_roughness\", \"coatRoughness\", \"COAT_ROUGHNESS\");\n        this._coatRoughnessAnisotropy = new Property(\"coat_roughness_anisotropy\", 0, \"vCoatRoughnessAnisotropy\", 1);\n        this._coatRoughnessAnisotropyTexture = new Sampler(\"coat_roughness_anisotropy\", \"coatRoughnessAnisotropy\", \"COAT_ROUGHNESS_ANISOTROPY\");\n        this._coatIor = new Property(\"coat_ior\", 1.5, \"vCoatIor\", 1, 0);\n        this._coatDarkening = new Property(\"coat_darkening\", 1.0, \"vCoatDarkening\", 1, 0);\n        this._coatDarkeningTexture = new Sampler(\"coat_darkening\", \"coatDarkening\", \"COAT_DARKENING\");\n        /**\n         * Specifies whether the coat roughness is taken from the\n         * same texture as the coat_weight.\n         */\n        this.useCoatRoughnessFromWeightTexture = false;\n        this._fuzzWeight = new Property(\"fuzz_weight\", 0.0, \"vFuzzWeight\", 1, 0);\n        this._fuzzWeightTexture = new Sampler(\"fuzz_weight\", \"fuzzWeight\", \"FUZZ_WEIGHT\");\n        this._fuzzColor = new Property(\"fuzz_color\", Color3.White(), \"vFuzzColor\", 3, 0);\n        this._fuzzColorTexture = new Sampler(\"fuzz_color\", \"fuzzColor\", \"FUZZ_COLOR\");\n        this._fuzzRoughness = new Property(\"fuzz_roughness\", 0.5, \"vFuzzRoughness\", 1, 0);\n        this._fuzzRoughnessTexture = new Sampler(\"fuzz_roughness\", \"fuzzRoughness\", \"FUZZ_ROUGHNESS\");\n        this._geometryNormalTexture = new Sampler(\"geometry_normal\", \"geometryNormal\", \"GEOMETRY_NORMAL\");\n        this._geometryTangent = new Property(\"geometry_tangent\", new Vector2(1, 0), \"vSpecularAnisotropy\", 3, 0);\n        this._geometryTangentTexture = new Sampler(\"geometry_tangent\", \"geometryTangent\", \"GEOMETRY_TANGENT\");\n        this._geometryCoatNormalTexture = new Sampler(\"geometry_coat_normal\", \"geometryCoatNormal\", \"GEOMETRY_COAT_NORMAL\");\n        this._geometryCoatTangent = new Property(\"geometry_coat_tangent\", new Vector2(1, 0), \"vGeometryCoatTangent\", 2, 0);\n        this._geometryCoatTangentTexture = new Sampler(\"geometry_coat_tangent\", \"geometryCoatTangent\", \"GEOMETRY_COAT_TANGENT\");\n        this._geometryOpacity = new Property(\"geometry_opacity\", 1.0, \"vBaseColor\", 4, 3);\n        this._geometryOpacityTexture = new Sampler(\"geometry_opacity\", \"geometryOpacity\", \"GEOMETRY_OPACITY\");\n        this._emissionLuminance = new Property(\"emission_luminance\", 1.0, \"vLightingIntensity\", 4, 1);\n        this._emissionColor = new Property(\"emission_color\", Color3.Black(), \"vEmissionColor\", 3);\n        this._emissionColorTexture = new Sampler(\"emission_color\", \"emissionColor\", \"EMISSION_COLOR\");\n        this._thinFilmWeight = new Property(\"thin_film_weight\", 0.0, \"vThinFilmWeight\", 1, 0);\n        this._thinFilmWeightTexture = new Sampler(\"thin_film_weight\", \"thinFilmWeight\", \"THIN_FILM_WEIGHT\");\n        this._thinFilmThickness = new Property(\"thin_film_thickness\", 0.5, \"vThinFilmThickness\", 2, 0);\n        this._thinFilmThicknessMin = new Property(\"thin_film_thickness_min\", 0.0, \"vThinFilmThickness\", 2, 1);\n        this._thinFilmThicknessTexture = new Sampler(\"thin_film_thickness\", \"thinFilmThickness\", \"THIN_FILM_THICKNESS\");\n        this._thinFilmIor = new Property(\"thin_film_ior\", 1.4, \"vThinFilmIor\", 1, 0);\n        this._ambientOcclusionTexture = new Sampler(\"ambient_occlusion\", \"ambientOcclusion\", \"AMBIENT_OCCLUSION\");\n        this._uniformsList = {};\n        this._samplersList = {};\n        this._samplerDefines = {};\n        /**\n         * Intensity of the direct lights e.g. the four lights available in your scene.\n         * This impacts both the direct diffuse and specular highlights.\n         */\n        this.directIntensity = 1.0;\n        /**\n         * Intensity of the environment e.g. how much the environment will light the object\n         * either through harmonics for rough material or through the reflection for shiny ones.\n         */\n        this.environmentIntensity = 1.0;\n        /**\n         * Specifies that the specular weight is stored in the alpha channel of the specular weight texture.\n         */\n        this.useSpecularWeightFromTextureAlpha = false;\n        /**\n         * Enforces alpha test in opaque or blend mode in order to improve the performances of some situations.\n         */\n        this.forceAlphaTest = false;\n        /**\n         * Defines the alpha limits in alpha test mode.\n         */\n        this.alphaCutOff = 0.4;\n        /**\n         * Specifies if the metallic texture contains the ambient occlusion information in its red channel.\n         */\n        this.useAmbientOcclusionFromMetallicTextureRed = false;\n        /**\n         * Specifies if the ambient texture contains the ambient occlusion information in its red channel only.\n         */\n        this.useAmbientInGrayScale = false;\n        /**\n         * Allows using an object space normal map (instead of tangent space).\n         */\n        this.useObjectSpaceNormalMap = false;\n        /**\n         * Allows using the normal map in parallax mode.\n         */\n        this.useParallax = false;\n        /**\n         * Allows using the normal map in parallax occlusion mode.\n         */\n        this.useParallaxOcclusion = false;\n        /**\n         * Controls the scale bias of the parallax mode.\n         */\n        this.parallaxScaleBias = 0.05;\n        /**\n         * If sets to true, disables all the lights affecting the material.\n         */\n        this.disableLighting = false;\n        /**\n         * Force the shader to compute irradiance in the fragment shader in order to take normal mapping into account.\n         */\n        this.forceIrradianceInFragment = false;\n        /**\n         * Number of Simultaneous lights allowed on the material.\n         */\n        this.maxSimultaneousLights = 4;\n        /**\n         * If sets to true, x component of normal map value will invert (x = 1.0 - x).\n         */\n        this.invertNormalMapX = false;\n        /**\n         * If sets to true, y component of normal map value will invert (y = 1.0 - y).\n         */\n        this.invertNormalMapY = false;\n        /**\n         * If sets to true and backfaceCulling is false, normals will be flipped on the backside.\n         */\n        this.twoSidedLighting = false;\n        /**\n         * A fresnel is applied to the alpha of the model to ensure grazing angles edges are not alpha tested.\n         * And/Or occlude the blended part. (alpha is converted to gamma to compute the fresnel)\n         */\n        this.useAlphaFresnel = false;\n        /**\n         * A fresnel is applied to the alpha of the model to ensure grazing angles edges are not alpha tested.\n         * And/Or occlude the blended part. (alpha stays linear to compute the fresnel)\n         */\n        this.useLinearAlphaFresnel = false;\n        /**\n         * Let user defines the brdf lookup texture used for IBL.\n         * A default 8bit version is embedded but you could point at :\n         * * Default texture: https://assets.babylonjs.com/environments/correlatedMSBRDF_RGBD.png\n         * * Default 16bit pixel depth texture: https://assets.babylonjs.com/environments/correlatedMSBRDF.dds\n         * * LEGACY Default None correlated https://assets.babylonjs.com/environments/uncorrelatedBRDF_RGBD.png\n         * * LEGACY Default None correlated 16bit pixel depth https://assets.babylonjs.com/environments/uncorrelatedBRDF.dds\n         */\n        this.environmentBRDFTexture = null;\n        /**\n         * Force normal to face away from face.\n         */\n        this.forceNormalForward = false;\n        /**\n         * Enables specular anti aliasing in the PBR shader.\n         * It will both interacts on the Geometry for analytical and IBL lighting.\n         * It also prefilter the roughness map based on the normalmap values.\n         */\n        this.enableSpecularAntiAliasing = false;\n        /**\n         * This parameters will enable/disable Horizon occlusion to prevent normal maps to look shiny when the normal\n         * makes the reflect vector face the model (under horizon).\n         */\n        this.useHorizonOcclusion = true;\n        /**\n         * This parameters will enable/disable radiance occlusion by preventing the radiance to lit\n         * too much the area relying on ambient texture to define their ambient occlusion.\n         */\n        this.useRadianceOcclusion = true;\n        /**\n         * If set to true, no lighting calculations will be applied.\n         */\n        this.unlit = false;\n        /**\n         * If sets to true, the decal map will be applied after the detail map. Else, it is applied before (default: false)\n         */\n        this.applyDecalMapAfterDetailMap = false;\n        /**\n         * This stores the direct, emissive, environment, and specular light intensities into a Vector4.\n         */\n        this._lightingInfos = new Vector4(this.directIntensity, 1.0, this.environmentIntensity, 1.0);\n        /**\n         * Stores the radiance (and, possibly, irradiance) values in a texture.\n         * @internal\n         */\n        this._radianceTexture = null;\n        /**\n         * Specifies that the specular weight will be read from the alpha channel.\n         * This is for compatibility with glTF's KHR_materials_specular extension.\n         * @internal\n         */\n        this._useSpecularWeightFromAlpha = false;\n        /**\n         * Specifies that the specular weight will be read from the alpha channel of the specular color texture.\n         * This is for compatibility with glTF's KHR_materials_specular extension.\n         * @internal\n         */\n        this._useSpecularWeightFromSpecularColorTexture = false;\n        /**\n         * Specifies if the material uses anisotropy weight read from the geometry tangent texture's blue channel.\n         * This is for compatibility with glTF's anisotropy extension.\n         * @internal\n         */\n        this._useSpecularRoughnessAnisotropyFromTangentTexture = false;\n        /**\n         * Specifies if the material uses coat anisotropy weight read from the coat's geometry tangent texture's blue channel.\n         * This is for compatibility with glTF's clearcoat_anisotropy extension.\n         * @internal\n         */\n        this._useCoatRoughnessAnisotropyFromTangentTexture = false;\n        /**\n         * Specifies whether the coat roughness is taken from the green channel of the coat texture.\n         * This is for compatibility with glTF's KHR_materials_clearcoat and KHR_materials_coat extensions.\n         * @internal\n         */\n        this._useCoatRoughnessFromGreenChannel = false;\n        /**\n         * Assume the anisotropy data is stored in the format specified by\n         * KHR_materials_anisotropy.\n         * @internal\n         */\n        this._useGltfStyleAnisotropy = false;\n        /**\n         * Specifies that the fuzz roughness is stored in the alpha channel of the texture.\n         * This is for compatibility with glTF where the fuzz roughness is often stored in\n         * the alpha channel of the fuzz color texture.\n         */\n        this._useFuzzRoughnessFromTextureAlpha = false;\n        /**\n         * This parameters will enable/disable Horizon occlusion to prevent normal maps to look shiny when the normal\n         * makes the reflect vector face the model (under horizon).\n         * @internal\n         */\n        this._useHorizonOcclusion = true;\n        /**\n         * This parameters will enable/disable radiance occlusion by preventing the radiance to lit\n         * too much the area relying on ambient texture to define their ambient occlusion.\n         * @internal\n         */\n        this._useRadianceOcclusion = true;\n        /**\n         * Specifies that the alpha is coming from the base color texture's alpha channel.\n         * This is for compatibility with glTF.\n         * @internal\n         */\n        this._useAlphaFromBaseColorTexture = false;\n        /**\n         * Specifies if the metallic texture contains the ambient occlusion information in its red channel.\n         * This is for compatibility with glTF.\n         * @internal\n         */\n        this._useAmbientOcclusionFromMetallicTextureRed = false;\n        /**\n         * Specifies if the metallic texture contains the roughness information in its green channel.\n         * This is for compatibility with glTF.\n         * @internal\n         */\n        this._useRoughnessFromMetallicTextureGreen = false;\n        /**\n         * Specifies if the metallic texture contains the metallic information in its blue channel.\n         * This is for compatibility with glTF.\n         * @internal\n         */\n        this._useMetallicFromMetallicTextureBlue = false;\n        /**\n         * Specifies if the thin film thickness is stored in the green channel of the thin film thickness texture.\n         */\n        this._useThinFilmThicknessFromTextureGreen = false;\n        /**\n         * Defines the  falloff type used in this material.\n         * It by default is Physical.\n         * @internal\n         */\n        this._lightFalloff = Material.LIGHTFALLOFF_PHYSICAL;\n        /**\n         * Allows using an object space normal map (instead of tangent space).\n         * @internal\n         */\n        this._useObjectSpaceNormalMap = false;\n        /**\n         * Allows using the normal map in parallax mode.\n         * @internal\n         */\n        this._useParallax = false;\n        /**\n         * Allows using the normal map in parallax occlusion mode.\n         * @internal\n         */\n        this._useParallaxOcclusion = false;\n        /**\n         * Controls the scale bias of the parallax mode.\n         * @internal\n         */\n        this._parallaxScaleBias = 0.05;\n        /**\n         * If sets to true, disables all the lights affecting the material.\n         * @internal\n         */\n        this._disableLighting = false;\n        /**\n         * Number of Simultaneous lights allowed on the material.\n         * @internal\n         */\n        this._maxSimultaneousLights = 4;\n        /**\n         * If sets to true, x component of normal map value will be inverted (x = 1.0 - x).\n         * @internal\n         */\n        this._invertNormalMapX = false;\n        /**\n         * If sets to true, y component of normal map value will be inverted (y = 1.0 - y).\n         * @internal\n         */\n        this._invertNormalMapY = false;\n        /**\n         * If sets to true and backfaceCulling is false, normals will be flipped on the backside.\n         * @internal\n         */\n        this._twoSidedLighting = false;\n        /**\n         * Defines the alpha limits in alpha test mode.\n         * @internal\n         */\n        this._alphaCutOff = 0.4;\n        /**\n         * A fresnel is applied to the alpha of the model to ensure grazing angles edges are not alpha tested.\n         * And/Or occlude the blended part. (alpha is converted to gamma to compute the fresnel)\n         * @internal\n         */\n        this._useAlphaFresnel = false;\n        /**\n         * A fresnel is applied to the alpha of the model to ensure grazing angles edges are not alpha tested.\n         * And/Or occlude the blended part. (alpha stays linear to compute the fresnel)\n         * @internal\n         */\n        this._useLinearAlphaFresnel = false;\n        /**\n         * Specifies the environment BRDF texture used to compute the scale and offset roughness values\n         * from cos theta and roughness:\n         * http://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n         * @internal\n         */\n        this._environmentBRDFTexture = null;\n        /**\n         * Specifies the environment BRDF texture used to compute the scale and offset roughness values\n         * from cos theta and roughness for the fuzz layer:\n         * https://github.com/tizian/ltc-sheen?tab=readme-ov-file\n         * @internal\n         */\n        this._environmentFuzzBRDFTexture = null;\n        /**\n         * Force the shader to compute irradiance in the fragment shader in order to take normal mapping into account.\n         * @internal\n         */\n        this._forceIrradianceInFragment = false;\n        this._realTimeFiltering = false;\n        this._realTimeFilteringQuality = Constants.TEXTURE_FILTERING_QUALITY_LOW;\n        this._fuzzSampleNumber = 4;\n        /**\n         * Force normal to face away from face.\n         * @internal\n         */\n        this._forceNormalForward = false;\n        /**\n         * Enables specular anti aliasing in the PBR shader.\n         * It will both interacts on the Geometry for analytical and IBL lighting.\n         * It also prefilter the roughness map based on the normalmap values.\n         * @internal\n         */\n        this._enableSpecularAntiAliasing = false;\n        /**\n         * Stores the available render targets.\n         */\n        this._renderTargets = new SmartArray(16);\n        /**\n         * If set to true, no lighting calculations will be applied.\n         */\n        this._unlit = false;\n        /**\n         * If sets to true, the decal map will be applied after the detail map. Else, it is applied before (default: false)\n         */\n        this._applyDecalMapAfterDetailMap = false;\n        this._debugMode = 0;\n        this._shadersLoaded = false;\n        this._breakShaderLoadedCheck = false;\n        /**\n         * @internal\n         * This is reserved for the inspector.\n         * Defines the material debug mode.\n         * It helps seeing only some components of the material while troubleshooting.\n         */\n        this.debugMode = 0;\n        /**\n         * @internal\n         * This is reserved for the inspector.\n         * Specify from where on screen the debug mode should start.\n         * The value goes from -1 (full screen) to 1 (not visible)\n         * It helps with side by side comparison against the final render\n         * This defaults to -1\n         */\n        this.debugLimit = -1;\n        /**\n         * @internal\n         * This is reserved for the inspector.\n         * As the default viewing range might not be enough (if the ambient is really small for instance)\n         * You can use the factor to better multiply the final value.\n         */\n        this.debugFactor = 1;\n        this._cacheHasRenderTargetTextures = false;\n        this._transparencyMode = Material.MATERIAL_OPAQUE;\n        // TODO: Check if we're running WebGL 2.0 or above\n        if (this.getScene() && !this.getScene()?.getEngine().isWebGPU && this.getScene().getEngine().webGLVersion < 2) {\n            Logger.Error(\"OpenPBRMaterial: WebGL 2.0 or above is required for this material.\");\n        }\n        if (!OpenPBRMaterial._noiseTextures[this.getScene().uniqueId]) {\n            OpenPBRMaterial._noiseTextures[this.getScene().uniqueId] = new Texture(Tools.GetAssetUrl(\"https://assets.babylonjs.com/core/blue_noise/blue_noise_rgb.png\"), this.getScene(), false, true, Constants.TEXTURE_NEAREST_SAMPLINGMODE);\n            this.getScene().onDisposeObservable.addOnce(() => {\n                OpenPBRMaterial._noiseTextures[this.getScene().uniqueId]?.dispose();\n                delete OpenPBRMaterial._noiseTextures[this.getScene().uniqueId];\n            });\n        }\n        // Setup the default processing configuration to the scene.\n        this._attachImageProcessingConfiguration(null);\n        this.getRenderTargetTextures = () => {\n            this._renderTargets.reset();\n            if (MaterialFlags.ReflectionTextureEnabled && this._radianceTexture && this._radianceTexture.isRenderTarget) {\n                this._renderTargets.push(this._radianceTexture);\n            }\n            this._eventInfo.renderTargets = this._renderTargets;\n            this._callbackPluginEventFillRenderTargetTextures(this._eventInfo);\n            return this._renderTargets;\n        };\n        this._environmentBRDFTexture = GetEnvironmentBRDFTexture(this.getScene());\n        this._environmentFuzzBRDFTexture = GetEnvironmentFuzzBRDFTexture(this.getScene());\n        this.prePassConfiguration = new PrePassConfiguration();\n        // Build the internal property list that can be used to generate and update the uniform buffer\n        this._propertyList = {};\n        for (const key of Object.getOwnPropertyNames(this)) {\n            const value = this[key];\n            if (value instanceof Property) {\n                this._propertyList[key] = value;\n            }\n        }\n        // Build the internal uniforms list that is used for combining and updating\n        // property values in the uniform buffer\n        const propertyKeys = Object.keys(this._propertyList);\n        propertyKeys.forEach((key) => {\n            const prop = this._propertyList[key];\n            let uniform = this._uniformsList[prop.targetUniformName];\n            if (!uniform) {\n                uniform = new Uniform(prop.targetUniformName, prop.targetUniformComponentNum);\n                this._uniformsList[prop.targetUniformName] = uniform;\n            }\n            else if (uniform.numComponents !== prop.targetUniformComponentNum) {\n                Logger.Error(`Uniform ${prop.targetUniformName} already exists of size ${uniform.numComponents}, but trying to set it to ${prop.targetUniformComponentNum}.`);\n            }\n            uniform.linkedProperties[prop.name] = prop;\n        });\n        // Build the internal list of samplers\n        this._samplersList = {};\n        for (const key of Object.getOwnPropertyNames(this)) {\n            const value = this[key];\n            if (value instanceof Sampler) {\n                this._samplersList[key] = value;\n            }\n        }\n        // For each sampler in _samplersList, add defines to be added to OpenPBRMaterialDefines\n        for (const samplerKey in this._samplersList) {\n            const sampler = this._samplersList[samplerKey];\n            const defineName = sampler.textureDefine;\n            this._samplerDefines[defineName] = { type: \"boolean\", default: false };\n            this._samplerDefines[defineName + \"DIRECTUV\"] = { type: \"number\", default: 0 };\n            this._samplerDefines[defineName + \"_GAMMA\"] = { type: \"boolean\", default: false };\n        }\n        // Arg. Why do I have to add these references to get rid of the linting errors?\n        this._baseWeight;\n        this._baseWeightTexture;\n        this._baseColor;\n        this._baseColorTexture;\n        this._baseDiffuseRoughness;\n        this._baseDiffuseRoughnessTexture;\n        this._baseMetalness;\n        this._baseMetalnessTexture;\n        this._specularWeight;\n        this._specularWeightTexture;\n        this._specularColor;\n        this._specularColorTexture;\n        this._specularRoughness;\n        this._specularIor;\n        this._specularRoughnessTexture;\n        this._specularRoughnessAnisotropy;\n        this._specularRoughnessAnisotropyTexture;\n        this._coatWeight;\n        this._coatWeightTexture;\n        this._coatColor;\n        this._coatColorTexture;\n        this._coatRoughness;\n        this._coatRoughnessTexture;\n        this._coatRoughnessAnisotropy;\n        this._coatRoughnessAnisotropyTexture;\n        this._coatIor;\n        this._coatDarkening;\n        this._coatDarkeningTexture;\n        this._fuzzWeight;\n        this._fuzzWeightTexture;\n        this._fuzzColor;\n        this._fuzzColorTexture;\n        this._fuzzRoughness;\n        this._fuzzRoughnessTexture;\n        this._geometryNormalTexture;\n        this._geometryTangent;\n        this._geometryTangentTexture;\n        this._geometryCoatNormalTexture;\n        this._geometryCoatTangent;\n        this._geometryCoatTangentTexture;\n        this._geometryOpacity;\n        this._geometryOpacityTexture;\n        this._thinFilmWeight;\n        this._thinFilmWeightTexture;\n        this._thinFilmThickness;\n        this._thinFilmThicknessMin;\n        this._thinFilmThicknessTexture;\n        this._thinFilmIor;\n        this._emissionLuminance;\n        this._emissionColor;\n        this._emissionColorTexture;\n        this._ambientOcclusionTexture;\n    }\n    /**\n     * Gets a boolean indicating that current material needs to register RTT\n     */\n    get hasRenderTargetTextures() {\n        if (MaterialFlags.ReflectionTextureEnabled && this._radianceTexture && this._radianceTexture.isRenderTarget) {\n            return true;\n        }\n        return this._cacheHasRenderTargetTextures;\n    }\n    /**\n     * Can this material render to prepass\n     */\n    get isPrePassCapable() {\n        return !this.disableDepthWrite;\n    }\n    /**\n     * @returns the name of the material class.\n     */\n    getClassName() {\n        return \"OpenPBRMaterial\";\n    }\n    get transparencyMode() {\n        return this._transparencyMode;\n    }\n    set transparencyMode(value) {\n        if (this._transparencyMode === value) {\n            return;\n        }\n        this._transparencyMode = value;\n        this._markAllSubMeshesAsTexturesAndMiscDirty();\n    }\n    /**\n     * @returns whether or not the alpha value of the albedo texture should be used for alpha blending.\n     */\n    _shouldUseAlphaFromBaseColorTexture() {\n        return this._hasAlphaChannel() && this._transparencyMode !== Material.MATERIAL_OPAQUE && !this.geometryOpacityTexture;\n    }\n    /**\n     * @returns whether or not there is a usable alpha channel for transparency.\n     */\n    _hasAlphaChannel() {\n        return (this.baseColorTexture != null && this.baseColorTexture.hasAlpha && this._useAlphaFromBaseColorTexture) || this.geometryOpacityTexture != null;\n    }\n    /**\n     * Makes a duplicate of the current material.\n     * @param name - name to use for the new material.\n     * @param cloneTexturesOnlyOnce - if a texture is used in more than one channel (e.g baseColor and opacity), only clone it once and reuse it on the other channels. Default false.\n     * @param rootUrl defines the root URL to use to load textures\n     * @returns cloned material instance\n     */\n    clone(name, cloneTexturesOnlyOnce = true, rootUrl = \"\") {\n        const clone = SerializationHelper.Clone(() => new OpenPBRMaterial(name, this.getScene()), this, { cloneTexturesOnlyOnce });\n        clone.id = name;\n        clone.name = name;\n        this.stencil.copyTo(clone.stencil);\n        this._clonePlugins(clone, rootUrl);\n        return clone;\n    }\n    /**\n     * Serializes this PBR Material.\n     * @returns - An object with the serialized material.\n     */\n    serialize() {\n        const serializationObject = super.serialize();\n        serializationObject.customType = \"BABYLON.OpenPBRMaterial\";\n        return serializationObject;\n    }\n    // Statics\n    /**\n     * Parses a PBR Material from a serialized object.\n     * @param source - Serialized object.\n     * @param scene - BJS scene instance.\n     * @param rootUrl - url for the scene object\n     * @returns - OpenPBRMaterial\n     */\n    static Parse(source, scene, rootUrl) {\n        const material = SerializationHelper.Parse(() => new OpenPBRMaterial(source.name, scene), source, scene, rootUrl);\n        if (source.stencil) {\n            material.stencil.parse(source.stencil, scene, rootUrl);\n        }\n        Material._ParsePlugins(source, material, scene, rootUrl);\n        return material;\n    }\n    /**\n     * Force shader compilation\n     * @param mesh - Define the mesh we want to force the compilation for\n     * @param onCompiled - Define a callback triggered when the compilation completes\n     * @param options - Define the options used to create the compilation\n     */\n    forceCompilation(mesh, onCompiled, options) {\n        const localOptions = {\n            clipPlane: false,\n            useInstances: false,\n            ...options,\n        };\n        if (!this._uniformBufferLayoutBuilt) {\n            this.buildUniformLayout();\n        }\n        this._callbackPluginEventGeneric(4 /* MaterialPluginEvent.GetDefineNames */, this._eventInfo);\n        const checkReady = () => {\n            if (this._breakShaderLoadedCheck) {\n                return;\n            }\n            const defines = new OpenPBRMaterialDefines({\n                ...(this._eventInfo.defineNames || {}),\n                ...(this._samplerDefines || {}),\n            });\n            const effect = this._prepareEffect(mesh, mesh, defines, undefined, undefined, localOptions.useInstances, localOptions.clipPlane);\n            if (this._onEffectCreatedObservable) {\n                onCreatedEffectParameters.effect = effect;\n                onCreatedEffectParameters.subMesh = null;\n                this._onEffectCreatedObservable.notifyObservers(onCreatedEffectParameters);\n            }\n            if (effect.isReady()) {\n                if (onCompiled) {\n                    onCompiled(this);\n                }\n            }\n            else {\n                effect.onCompileObservable.add(() => {\n                    if (onCompiled) {\n                        onCompiled(this);\n                    }\n                });\n            }\n        };\n        checkReady();\n    }\n    /**\n     * Specifies that the submesh is ready to be used.\n     * @param mesh - BJS mesh.\n     * @param subMesh - A submesh of the BJS mesh.  Used to check if it is ready.\n     * @param useInstances - Specifies that instances should be used.\n     * @returns - boolean indicating that the submesh is ready or not.\n     */\n    isReadyForSubMesh(mesh, subMesh, useInstances) {\n        if (!this._uniformBufferLayoutBuilt) {\n            this.buildUniformLayout();\n        }\n        const drawWrapper = subMesh._drawWrapper;\n        if (drawWrapper.effect && this.isFrozen) {\n            if (drawWrapper._wasPreviouslyReady && drawWrapper._wasPreviouslyUsingInstances === useInstances) {\n                return true;\n            }\n        }\n        if (!subMesh.materialDefines) {\n            this._callbackPluginEventGeneric(4 /* MaterialPluginEvent.GetDefineNames */, this._eventInfo);\n            subMesh.materialDefines = new OpenPBRMaterialDefines({\n                ...(this._eventInfo.defineNames || {}),\n                ...(this._samplerDefines || {}),\n            });\n        }\n        const defines = subMesh.materialDefines;\n        if (this._isReadyForSubMesh(subMesh)) {\n            return true;\n        }\n        const scene = this.getScene();\n        const engine = scene.getEngine();\n        if (defines._areTexturesDirty) {\n            this._eventInfo.hasRenderTargetTextures = false;\n            this._callbackPluginEventHasRenderTargetTextures(this._eventInfo);\n            this._cacheHasRenderTargetTextures = this._eventInfo.hasRenderTargetTextures;\n            if (scene.texturesEnabled) {\n                // Loop through samplers, check MaterialFlag and whether the texture is ready or not.\n                for (const key in this._samplersList) {\n                    const sampler = this._samplersList[key];\n                    if (sampler.value) {\n                        if (!sampler.value.isReadyOrNotBlocking()) {\n                            return false;\n                        }\n                    }\n                }\n                const radianceTexture = this._getRadianceTexture();\n                if (radianceTexture && MaterialFlags.ReflectionTextureEnabled) {\n                    if (!radianceTexture.isReadyOrNotBlocking()) {\n                        return false;\n                    }\n                    if (radianceTexture.irradianceTexture) {\n                        if (!radianceTexture.irradianceTexture.isReadyOrNotBlocking()) {\n                            return false;\n                        }\n                    }\n                    else {\n                        // Not ready until spherical are ready too.\n                        if (!radianceTexture.sphericalPolynomial && radianceTexture.getInternalTexture()?._sphericalPolynomialPromise) {\n                            return false;\n                        }\n                    }\n                }\n                if (this._environmentBRDFTexture && MaterialFlags.ReflectionTextureEnabled) {\n                    // This is blocking.\n                    if (!this._environmentBRDFTexture.isReady()) {\n                        return false;\n                    }\n                }\n                if (this._environmentFuzzBRDFTexture && MaterialFlags.ReflectionTextureEnabled) {\n                    // This is blocking.\n                    if (!this._environmentFuzzBRDFTexture.isReady()) {\n                        return false;\n                    }\n                }\n                if (OpenPBRMaterial._noiseTextures[scene.uniqueId]) {\n                    if (!OpenPBRMaterial._noiseTextures[scene.uniqueId].isReady()) {\n                        return false;\n                    }\n                }\n            }\n        }\n        this._eventInfo.isReadyForSubMesh = true;\n        this._eventInfo.defines = defines;\n        this._eventInfo.subMesh = subMesh;\n        this._callbackPluginEventIsReadyForSubMesh(this._eventInfo);\n        if (!this._eventInfo.isReadyForSubMesh) {\n            return false;\n        }\n        if (defines._areImageProcessingDirty && this._imageProcessingConfiguration) {\n            if (!this._imageProcessingConfiguration.isReady()) {\n                return false;\n            }\n        }\n        // Check if Area Lights have LTC texture.\n        if (defines[\"AREALIGHTUSED\"]) {\n            for (let index = 0; index < mesh.lightSources.length; index++) {\n                if (!mesh.lightSources[index]._isReady()) {\n                    return false;\n                }\n            }\n        }\n        if (!engine.getCaps().standardDerivatives && !mesh.isVerticesDataPresent(VertexBuffer.NormalKind)) {\n            mesh.createNormals(true);\n            Logger.Warn(\"OpenPBRMaterial: Normals have been created for the mesh: \" + mesh.name);\n        }\n        const previousEffect = subMesh.effect;\n        const lightDisposed = defines._areLightsDisposed;\n        let effect = this._prepareEffect(mesh, subMesh.getRenderingMesh(), defines, this.onCompiled, this.onError, useInstances, null);\n        let forceWasNotReadyPreviously = false;\n        if (effect) {\n            if (this._onEffectCreatedObservable) {\n                onCreatedEffectParameters.effect = effect;\n                onCreatedEffectParameters.subMesh = subMesh;\n                this._onEffectCreatedObservable.notifyObservers(onCreatedEffectParameters);\n            }\n            // Use previous effect while new one is compiling\n            if (this.allowShaderHotSwapping && previousEffect && !effect.isReady()) {\n                effect = previousEffect;\n                defines.markAsUnprocessed();\n                forceWasNotReadyPreviously = this.isFrozen;\n                if (lightDisposed) {\n                    // re register in case it takes more than one frame.\n                    defines._areLightsDisposed = true;\n                    return false;\n                }\n            }\n            else {\n                scene.resetCachedMaterial();\n                subMesh.setEffect(effect, defines, this._materialContext);\n            }\n        }\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\n            return false;\n        }\n        defines._renderId = scene.getRenderId();\n        drawWrapper._wasPreviouslyReady = forceWasNotReadyPreviously ? false : true;\n        drawWrapper._wasPreviouslyUsingInstances = !!useInstances;\n        this._checkScenePerformancePriority();\n        return true;\n    }\n    /**\n     * Initializes the uniform buffer layout for the shader.\n     */\n    buildUniformLayout() {\n        // Order is important !\n        const ubo = this._uniformBuffer;\n        ubo.addUniform(\"vTangentSpaceParams\", 2);\n        ubo.addUniform(\"vLightingIntensity\", 4);\n        ubo.addUniform(\"pointSize\", 1);\n        ubo.addUniform(\"vDebugMode\", 2);\n        ubo.addUniform(\"cameraInfo\", 4);\n        PrepareUniformLayoutForIBL(ubo, true, true, true, true, true);\n        Object.values(this._uniformsList).forEach((uniform) => {\n            ubo.addUniform(uniform.name, uniform.numComponents);\n        });\n        Object.values(this._samplersList).forEach((sampler) => {\n            ubo.addUniform(sampler.samplerInfoName, 2);\n            ubo.addUniform(sampler.samplerMatrixName, 16);\n        });\n        super.buildUniformLayout();\n    }\n    /**\n     * Binds the submesh data.\n     * @param world - The world matrix.\n     * @param mesh - The BJS mesh.\n     * @param subMesh - A submesh of the BJS mesh.\n     */\n    bindForSubMesh(world, mesh, subMesh) {\n        const scene = this.getScene();\n        const defines = subMesh.materialDefines;\n        if (!defines) {\n            return;\n        }\n        const effect = subMesh.effect;\n        if (!effect) {\n            return;\n        }\n        this._activeEffect = effect;\n        // Matrices Mesh.\n        mesh.getMeshUniformBuffer().bindToEffect(effect, \"Mesh\");\n        mesh.transferToEffect(world);\n        const engine = scene.getEngine();\n        // Binding unconditionally\n        this._uniformBuffer.bindToEffect(effect, \"Material\");\n        this.prePassConfiguration.bindForSubMesh(this._activeEffect, scene, mesh, world, this.isFrozen);\n        MaterialHelperGeometryRendering.Bind(engine.currentRenderPassId, this._activeEffect, mesh, world, this);\n        const camera = scene.activeCamera;\n        if (camera) {\n            this._uniformBuffer.updateFloat4(\"cameraInfo\", camera.minZ, camera.maxZ, 0, 0);\n        }\n        else {\n            this._uniformBuffer.updateFloat4(\"cameraInfo\", 0, 0, 0, 0);\n        }\n        this._eventInfo.subMesh = subMesh;\n        this._callbackPluginEventHardBindForSubMesh(this._eventInfo);\n        // Normal Matrix\n        if (defines.OBJECTSPACE_NORMALMAP) {\n            world.toNormalMatrix(this._normalMatrix);\n            this.bindOnlyNormalMatrix(this._normalMatrix);\n        }\n        const mustRebind = this._mustRebind(scene, effect, subMesh, mesh.visibility);\n        // Bones\n        BindBonesParameters(mesh, this._activeEffect, this.prePassConfiguration);\n        let radianceTexture = null;\n        const ubo = this._uniformBuffer;\n        if (mustRebind) {\n            this.bindViewProjection(effect);\n            radianceTexture = this._getRadianceTexture();\n            if (!ubo.useUbo || !this.isFrozen || !ubo.isSync || subMesh._drawWrapper._forceRebindOnNextCall) {\n                // Texture uniforms\n                if (scene.texturesEnabled) {\n                    // Loop through samplers and bind info and matrix for each texture.\n                    for (const key in this._samplersList) {\n                        const sampler = this._samplersList[key];\n                        if (sampler.value) {\n                            ubo.updateFloat2(sampler.samplerInfoName, sampler.value.coordinatesIndex, sampler.value.level);\n                            BindTextureMatrix(sampler.value, ubo, sampler.samplerPrefix);\n                        }\n                    }\n                    if (this.geometryNormalTexture) {\n                        if (scene._mirroredCameraPosition) {\n                            ubo.updateFloat2(\"vTangentSpaceParams\", this._invertNormalMapX ? 1.0 : -1.0, this._invertNormalMapY ? 1.0 : -1.0);\n                        }\n                        else {\n                            ubo.updateFloat2(\"vTangentSpaceParams\", this._invertNormalMapX ? -1.0 : 1.0, this._invertNormalMapY ? -1.0 : 1.0);\n                        }\n                    }\n                    BindIBLParameters(scene, defines, ubo, Color3.White(), radianceTexture, this.realTimeFiltering, true, true, true, true, true);\n                }\n                // Point size\n                if (this.pointsCloud) {\n                    ubo.updateFloat(\"pointSize\", this.pointSize);\n                }\n                Object.values(this._uniformsList).forEach((uniform) => {\n                    // If the property actually defines a uniform, update it.\n                    if (uniform.numComponents === 4) {\n                        uniform.populateVectorFromLinkedProperties(TmpVectors.Vector4[0]);\n                        ubo.updateVector4(uniform.name, TmpVectors.Vector4[0]);\n                    }\n                    else if (uniform.numComponents === 3) {\n                        uniform.populateVectorFromLinkedProperties(TmpVectors.Vector3[0]);\n                        ubo.updateVector3(uniform.name, TmpVectors.Vector3[0]);\n                    }\n                    else if (uniform.numComponents === 2) {\n                        uniform.populateVectorFromLinkedProperties(TmpVectors.Vector2[0]);\n                        ubo.updateFloat2(uniform.name, TmpVectors.Vector2[0].x, TmpVectors.Vector2[0].y);\n                    }\n                    else if (uniform.numComponents === 1) {\n                        ubo.updateFloat(uniform.name, uniform.linkedProperties[Object.keys(uniform.linkedProperties)[0]].value);\n                    }\n                });\n                // Misc\n                this._lightingInfos.x = this.directIntensity;\n                this._lightingInfos.y = this.emissionLuminance;\n                this._lightingInfos.z = this.environmentIntensity * scene.environmentIntensity;\n                this._lightingInfos.w = 1.0; // This is used to be _specularIntensity.\n                ubo.updateVector4(\"vLightingIntensity\", this._lightingInfos);\n                ubo.updateFloat2(\"vDebugMode\", this.debugLimit, this.debugFactor);\n            }\n            // Textures\n            if (scene.texturesEnabled) {\n                // Loop through samplers and set textures\n                for (const key in this._samplersList) {\n                    const sampler = this._samplersList[key];\n                    if (sampler.value) {\n                        ubo.setTexture(sampler.samplerName, sampler.value);\n                    }\n                }\n                BindIBLSamplers(scene, defines, ubo, radianceTexture, this.realTimeFiltering);\n                if (defines.ENVIRONMENTBRDF) {\n                    ubo.setTexture(\"environmentBrdfSampler\", this._environmentBRDFTexture);\n                }\n                if (defines.FUZZENVIRONMENTBRDF) {\n                    ubo.setTexture(\"environmentFuzzBrdfSampler\", this._environmentFuzzBRDFTexture);\n                }\n                if (defines.ANISOTROPIC || defines.FUZZ) {\n                    ubo.setTexture(\"blueNoiseSampler\", OpenPBRMaterial._noiseTextures[this.getScene().uniqueId]);\n                }\n            }\n            // OIT with depth peeling\n            if (this.getScene().useOrderIndependentTransparency && this.needAlphaBlendingForMesh(mesh)) {\n                this.getScene().depthPeelingRenderer.bind(effect);\n            }\n            this._eventInfo.subMesh = subMesh;\n            this._callbackPluginEventBindForSubMesh(this._eventInfo);\n            // Clip plane\n            BindClipPlane(this._activeEffect, this, scene);\n            this.bindEyePosition(effect);\n        }\n        else if (scene.getEngine()._features.needToAlwaysBindUniformBuffers) {\n            this._needToBindSceneUbo = true;\n        }\n        if (mustRebind || !this.isFrozen) {\n            // Lights\n            if (scene.lightsEnabled && !this._disableLighting) {\n                BindLights(scene, mesh, this._activeEffect, defines, this._maxSimultaneousLights);\n            }\n            // View\n            if ((scene.fogEnabled && mesh.applyFog && scene.fogMode !== Scene.FOGMODE_NONE) || radianceTexture || mesh.receiveShadows || defines.PREPASS) {\n                this.bindView(effect);\n            }\n            // Fog\n            BindFogParameters(scene, mesh, this._activeEffect, true);\n            // Morph targets\n            if (defines.NUM_MORPH_INFLUENCERS) {\n                BindMorphTargetParameters(mesh, this._activeEffect);\n            }\n            if (defines.BAKED_VERTEX_ANIMATION_TEXTURE) {\n                mesh.bakedVertexAnimationManager?.bind(effect, defines.INSTANCES);\n            }\n            // image processing\n            this._imageProcessingConfiguration.bind(this._activeEffect);\n            // Log. depth\n            BindLogDepth(defines, this._activeEffect, scene);\n        }\n        this._afterBind(mesh, this._activeEffect, subMesh);\n        ubo.update();\n    }\n    /**\n     * Returns the animatable textures.\n     * If material have animatable metallic texture, then reflectivity texture will not be returned, even if it has animations.\n     * @returns - Array of animatable textures.\n     */\n    getAnimatables() {\n        const results = super.getAnimatables();\n        // Loop through samplers and push animated textures to list.\n        for (const key in this._samplersList) {\n            const sampler = this._samplersList[key];\n            if (sampler.value && sampler.value.animations && sampler.value.animations.length > 0) {\n                results.push(sampler.value);\n            }\n        }\n        if (this._radianceTexture && this._radianceTexture.animations && this._radianceTexture.animations.length > 0) {\n            results.push(this._radianceTexture);\n        }\n        return results;\n    }\n    /**\n     * Returns an array of the actively used textures.\n     * @returns - Array of BaseTextures\n     */\n    getActiveTextures() {\n        const activeTextures = super.getActiveTextures();\n        // Loop through samplers and push active textures\n        for (const key in this._samplersList) {\n            const sampler = this._samplersList[key];\n            if (sampler.value) {\n                activeTextures.push(sampler.value);\n            }\n        }\n        if (this._radianceTexture) {\n            activeTextures.push(this._radianceTexture);\n        }\n        return activeTextures;\n    }\n    /**\n     * Checks to see if a texture is used in the material.\n     * @param texture - Base texture to use.\n     * @returns - Boolean specifying if a texture is used in the material.\n     */\n    hasTexture(texture) {\n        if (super.hasTexture(texture)) {\n            return true;\n        }\n        // Loop through samplers and check each texture for equality\n        for (const key in this._samplersList) {\n            const sampler = this._samplersList[key];\n            if (sampler.value === texture) {\n                return true;\n            }\n        }\n        if (this._radianceTexture === texture) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Sets the required values to the prepass renderer.\n     * It can't be sets when subsurface scattering of this material is disabled.\n     * When scene have ability to enable subsurface prepass effect, it will enable.\n     * @returns - If prepass is enabled or not.\n     */\n    setPrePassRenderer() {\n        return false;\n    }\n    /**\n     * Disposes the resources of the material.\n     * @param forceDisposeEffect - Forces the disposal of effects.\n     * @param forceDisposeTextures - Forces the disposal of all textures.\n     */\n    dispose(forceDisposeEffect, forceDisposeTextures) {\n        this._breakShaderLoadedCheck = true;\n        if (forceDisposeTextures) {\n            if (this._environmentBRDFTexture && this.getScene().environmentBRDFTexture !== this._environmentBRDFTexture) {\n                this._environmentBRDFTexture.dispose();\n            }\n            if (this._environmentFuzzBRDFTexture && this.getScene().environmentFuzzBRDFTexture !== this._environmentFuzzBRDFTexture) {\n                this._environmentFuzzBRDFTexture.dispose();\n            }\n            // Loop through samplers and dispose the textures\n            for (const key in this._samplersList) {\n                const sampler = this._samplersList[key];\n                sampler.value?.dispose();\n            }\n            this._radianceTexture?.dispose();\n        }\n        this._renderTargets.dispose();\n        if (this._imageProcessingConfiguration && this._imageProcessingObserver) {\n            this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver);\n        }\n        super.dispose(forceDisposeEffect, forceDisposeTextures);\n    }\n    /**\n     * Returns the texture used for reflections.\n     * @returns - Reflection texture if present.  Otherwise, returns the environment texture.\n     */\n    _getRadianceTexture() {\n        if (this._radianceTexture) {\n            return this._radianceTexture;\n        }\n        return this.getScene().environmentTexture;\n    }\n    _prepareEffect(mesh, renderingMesh, defines, onCompiled = null, onError = null, useInstances = null, useClipPlane = null) {\n        this._prepareDefines(mesh, renderingMesh, defines, useInstances, useClipPlane);\n        if (!defines.isDirty) {\n            return null;\n        }\n        defines.markAsProcessed();\n        const scene = this.getScene();\n        const engine = scene.getEngine();\n        // Fallbacks\n        const fallbacks = new EffectFallbacks();\n        let fallbackRank = 0;\n        if (defines.USESPHERICALINVERTEX) {\n            fallbacks.addFallback(fallbackRank++, \"USESPHERICALINVERTEX\");\n        }\n        if (defines.FOG) {\n            fallbacks.addFallback(fallbackRank, \"FOG\");\n        }\n        if (defines.SPECULARAA) {\n            fallbacks.addFallback(fallbackRank, \"SPECULARAA\");\n        }\n        if (defines.POINTSIZE) {\n            fallbacks.addFallback(fallbackRank, \"POINTSIZE\");\n        }\n        if (defines.LOGARITHMICDEPTH) {\n            fallbacks.addFallback(fallbackRank, \"LOGARITHMICDEPTH\");\n        }\n        if (defines.PARALLAX) {\n            fallbacks.addFallback(fallbackRank, \"PARALLAX\");\n        }\n        if (defines.PARALLAX_RHS) {\n            fallbacks.addFallback(fallbackRank, \"PARALLAX_RHS\");\n        }\n        if (defines.PARALLAXOCCLUSION) {\n            fallbacks.addFallback(fallbackRank++, \"PARALLAXOCCLUSION\");\n        }\n        if (defines.ENVIRONMENTBRDF) {\n            fallbacks.addFallback(fallbackRank++, \"ENVIRONMENTBRDF\");\n        }\n        if (defines.TANGENT) {\n            fallbacks.addFallback(fallbackRank++, \"TANGENT\");\n        }\n        fallbackRank = HandleFallbacksForShadows(defines, fallbacks, this._maxSimultaneousLights, fallbackRank++);\n        if (defines.SPECULARTERM) {\n            fallbacks.addFallback(fallbackRank++, \"SPECULARTERM\");\n        }\n        if (defines.USESPHERICALFROMREFLECTIONMAP) {\n            fallbacks.addFallback(fallbackRank++, \"USESPHERICALFROMREFLECTIONMAP\");\n        }\n        if (defines.USEIRRADIANCEMAP) {\n            fallbacks.addFallback(fallbackRank++, \"USEIRRADIANCEMAP\");\n        }\n        if (defines.NORMAL) {\n            fallbacks.addFallback(fallbackRank++, \"NORMAL\");\n        }\n        if (defines.VERTEXCOLOR) {\n            fallbacks.addFallback(fallbackRank++, \"VERTEXCOLOR\");\n        }\n        if (defines.MORPHTARGETS) {\n            fallbacks.addFallback(fallbackRank++, \"MORPHTARGETS\");\n        }\n        if (defines.MULTIVIEW) {\n            fallbacks.addFallback(0, \"MULTIVIEW\");\n        }\n        //Attributes\n        const attribs = [VertexBuffer.PositionKind];\n        if (defines.NORMAL) {\n            attribs.push(VertexBuffer.NormalKind);\n        }\n        if (defines.TANGENT) {\n            attribs.push(VertexBuffer.TangentKind);\n        }\n        for (let i = 1; i <= Constants.MAX_SUPPORTED_UV_SETS; ++i) {\n            if (defines[\"UV\" + i]) {\n                attribs.push(`uv${i === 1 ? \"\" : i}`);\n            }\n        }\n        if (defines.VERTEXCOLOR) {\n            attribs.push(VertexBuffer.ColorKind);\n        }\n        PrepareAttributesForBones(attribs, mesh, defines, fallbacks);\n        PrepareAttributesForInstances(attribs, defines);\n        PrepareAttributesForMorphTargets(attribs, mesh, defines);\n        PrepareAttributesForBakedVertexAnimation(attribs, mesh, defines);\n        let shaderName = \"openpbr\";\n        const uniforms = [\n            \"world\",\n            \"view\",\n            \"viewProjection\",\n            \"vEyePosition\",\n            \"vLightsType\",\n            \"visibility\",\n            \"vFogInfos\",\n            \"vFogColor\",\n            \"pointSize\",\n            \"mBones\",\n            \"normalMatrix\",\n            \"vLightingIntensity\",\n            \"logarithmicDepthConstant\",\n            \"vTangentSpaceParams\",\n            \"boneTextureWidth\",\n            \"vDebugMode\",\n            \"morphTargetTextureInfo\",\n            \"morphTargetTextureIndices\",\n            \"cameraInfo\",\n        ];\n        for (const uniformName in this._uniformsList) {\n            uniforms.push(uniformName);\n        }\n        const samplers = [\n            \"environmentBrdfSampler\",\n            \"blueNoiseSampler\",\n            \"boneSampler\",\n            \"morphTargets\",\n            \"oitDepthSampler\",\n            \"oitFrontColorSampler\",\n            \"areaLightsLTC1Sampler\",\n            \"areaLightsLTC2Sampler\",\n        ];\n        if (defines.FUZZENVIRONMENTBRDF) {\n            samplers.push(\"environmentFuzzBrdfSampler\");\n        }\n        for (const key in this._samplersList) {\n            const sampler = this._samplersList[key];\n            samplers.push(sampler.samplerName);\n            // Push uniforms for texture infos and matrix\n            uniforms.push(sampler.samplerInfoName);\n            uniforms.push(sampler.samplerMatrixName);\n        }\n        PrepareUniformsAndSamplersForIBL(uniforms, samplers, true);\n        const uniformBuffers = [\"Material\", \"Scene\", \"Mesh\"];\n        const indexParameters = { maxSimultaneousLights: this._maxSimultaneousLights, maxSimultaneousMorphTargets: defines.NUM_MORPH_INFLUENCERS };\n        this._eventInfo.fallbacks = fallbacks;\n        this._eventInfo.fallbackRank = fallbackRank;\n        this._eventInfo.defines = defines;\n        this._eventInfo.uniforms = uniforms;\n        this._eventInfo.attributes = attribs;\n        this._eventInfo.samplers = samplers;\n        this._eventInfo.uniformBuffersNames = uniformBuffers;\n        this._eventInfo.customCode = undefined;\n        this._eventInfo.mesh = mesh;\n        this._eventInfo.indexParameters = indexParameters;\n        this._callbackPluginEventGeneric(128 /* MaterialPluginEvent.PrepareEffect */, this._eventInfo);\n        MaterialHelperGeometryRendering.AddUniformsAndSamplers(uniforms, samplers);\n        PrePassConfiguration.AddUniforms(uniforms);\n        PrePassConfiguration.AddSamplers(samplers);\n        AddClipPlaneUniforms(uniforms);\n        if (ImageProcessingConfiguration) {\n            ImageProcessingConfiguration.PrepareUniforms(uniforms, defines);\n            ImageProcessingConfiguration.PrepareSamplers(samplers, defines);\n        }\n        PrepareUniformsAndSamplersList({\n            uniformsNames: uniforms,\n            uniformBuffersNames: uniformBuffers,\n            samplers: samplers,\n            defines: defines,\n            maxSimultaneousLights: this._maxSimultaneousLights,\n        });\n        const csnrOptions = {};\n        if (this.customShaderNameResolve) {\n            shaderName = this.customShaderNameResolve(shaderName, uniforms, uniformBuffers, samplers, defines, attribs, csnrOptions);\n        }\n        const join = defines.toString();\n        const effect = engine.createEffect(shaderName, {\n            attributes: attribs,\n            uniformsNames: uniforms,\n            uniformBuffersNames: uniformBuffers,\n            samplers: samplers,\n            defines: join,\n            fallbacks: fallbacks,\n            onCompiled: onCompiled,\n            onError: onError,\n            indexParameters,\n            processFinalCode: csnrOptions.processFinalCode,\n            processCodeAfterIncludes: this._eventInfo.customCode,\n            multiTarget: defines.PREPASS,\n            shaderLanguage: this._shaderLanguage,\n            extraInitializationsAsync: this._shadersLoaded\n                ? undefined\n                : async () => {\n                    if (this.shaderLanguage === 1 /* ShaderLanguage.WGSL */) {\n                        await Promise.all([import(\"../../ShadersWGSL/openpbr.vertex\"), import(\"../../ShadersWGSL/openpbr.fragment\")]);\n                    }\n                    else {\n                        await Promise.all([import(\"../../Shaders/openpbr.vertex\"), import(\"../../Shaders/openpbr.fragment\")]);\n                    }\n                    this._shadersLoaded = true;\n                },\n        }, engine);\n        this._eventInfo.customCode = undefined;\n        return effect;\n    }\n    _prepareDefines(mesh, renderingMesh, defines, useInstances = null, useClipPlane = null) {\n        const useThinInstances = renderingMesh.hasThinInstances;\n        const scene = this.getScene();\n        const engine = scene.getEngine();\n        // Lights\n        PrepareDefinesForLights(scene, mesh, defines, true, this._maxSimultaneousLights, this._disableLighting);\n        defines._needNormals = true;\n        // Multiview\n        PrepareDefinesForMultiview(scene, defines);\n        // PrePass\n        const oit = this.needAlphaBlendingForMesh(mesh) && this.getScene().useOrderIndependentTransparency;\n        PrepareDefinesForPrePass(scene, defines, this.canRenderToMRT && !oit);\n        // Order independant transparency\n        PrepareDefinesForOIT(scene, defines, oit);\n        MaterialHelperGeometryRendering.PrepareDefines(engine.currentRenderPassId, mesh, defines);\n        // Textures\n        defines.METALLICWORKFLOW = true;\n        if (defines._areTexturesDirty) {\n            defines._needUVs = false;\n            for (let i = 1; i <= Constants.MAX_SUPPORTED_UV_SETS; ++i) {\n                defines[\"MAINUV\" + i] = false;\n            }\n            if (scene.texturesEnabled) {\n                // Loop through samplers and prepare defines for each texture\n                for (const key in this._samplersList) {\n                    const sampler = this._samplersList[key];\n                    if (sampler.value) {\n                        PrepareDefinesForMergedUV(sampler.value, defines, sampler.textureDefine);\n                        defines[sampler.textureDefine + \"_GAMMA\"] = sampler.value.gammaSpace;\n                    }\n                    else {\n                        defines[sampler.textureDefine] = false;\n                    }\n                }\n                const radianceTexture = this._getRadianceTexture();\n                const useSHInFragment = this._forceIrradianceInFragment ||\n                    this.realTimeFiltering ||\n                    this._twoSidedLighting ||\n                    engine.getCaps().maxVaryingVectors <= 8 ||\n                    this._baseDiffuseRoughnessTexture != null;\n                PrepareDefinesForIBL(scene, radianceTexture, defines, this.realTimeFiltering, this.realTimeFilteringQuality, !useSHInFragment);\n                if (this._baseMetalnessTexture) {\n                    defines.AOSTOREINMETALMAPRED = this._useAmbientOcclusionFromMetallicTextureRed;\n                }\n                defines.SPECULAR_WEIGHT_IN_ALPHA = this._useSpecularWeightFromAlpha;\n                defines.SPECULAR_WEIGHT_FROM_SPECULAR_COLOR_TEXTURE = this._useSpecularWeightFromSpecularColorTexture;\n                defines.SPECULAR_ROUGHNESS_ANISOTROPY_FROM_TANGENT_TEXTURE = this._useSpecularRoughnessAnisotropyFromTangentTexture;\n                defines.COAT_ROUGHNESS_ANISOTROPY_FROM_TANGENT_TEXTURE = this._useCoatRoughnessAnisotropyFromTangentTexture;\n                defines.COAT_ROUGHNESS_FROM_GREEN_CHANNEL = this._useCoatRoughnessFromGreenChannel;\n                defines.ROUGHNESSSTOREINMETALMAPGREEN = this._useRoughnessFromMetallicTextureGreen;\n                defines.FUZZ_ROUGHNESS_FROM_TEXTURE_ALPHA = this._useFuzzRoughnessFromTextureAlpha;\n                defines.METALLNESSSTOREINMETALMAPBLUE = this._useMetallicFromMetallicTextureBlue;\n                defines.THIN_FILM_THICKNESS_FROM_THIN_FILM_TEXTURE = this._useThinFilmThicknessFromTextureGreen;\n                if (this.geometryNormalTexture) {\n                    if (this._useParallax && this.baseColorTexture && MaterialFlags.DiffuseTextureEnabled) {\n                        defines.PARALLAX = true;\n                        defines.PARALLAX_RHS = scene.useRightHandedSystem;\n                        defines.PARALLAXOCCLUSION = !!this._useParallaxOcclusion;\n                    }\n                    else {\n                        defines.PARALLAX = false;\n                    }\n                    defines.OBJECTSPACE_NORMALMAP = this._useObjectSpaceNormalMap;\n                }\n                else {\n                    defines.PARALLAX = false;\n                    defines.PARALLAX_RHS = false;\n                    defines.PARALLAXOCCLUSION = false;\n                    defines.OBJECTSPACE_NORMALMAP = false;\n                }\n                if (this._environmentBRDFTexture && MaterialFlags.ReflectionTextureEnabled) {\n                    defines.ENVIRONMENTBRDF = true;\n                    defines.ENVIRONMENTBRDF_RGBD = this._environmentBRDFTexture.isRGBD;\n                }\n                else {\n                    defines.ENVIRONMENTBRDF = false;\n                    defines.ENVIRONMENTBRDF_RGBD = false;\n                }\n                if (this._environmentFuzzBRDFTexture) {\n                    defines.FUZZENVIRONMENTBRDF = true;\n                }\n                else {\n                    defines.FUZZENVIRONMENTBRDF = false;\n                }\n                if (this._shouldUseAlphaFromBaseColorTexture()) {\n                    defines.ALPHA_FROM_BASE_COLOR_TEXTURE = true;\n                }\n                else {\n                    defines.ALPHA_FROM_BASE_COLOR_TEXTURE = false;\n                }\n            }\n            if (this._lightFalloff === Material.LIGHTFALLOFF_STANDARD) {\n                defines.USEPHYSICALLIGHTFALLOFF = false;\n                defines.USEGLTFLIGHTFALLOFF = false;\n            }\n            else if (this._lightFalloff === Material.LIGHTFALLOFF_GLTF) {\n                defines.USEPHYSICALLIGHTFALLOFF = false;\n                defines.USEGLTFLIGHTFALLOFF = true;\n            }\n            else {\n                defines.USEPHYSICALLIGHTFALLOFF = true;\n                defines.USEGLTFLIGHTFALLOFF = false;\n            }\n            if (!this.backFaceCulling && this._twoSidedLighting) {\n                defines.TWOSIDEDLIGHTING = true;\n            }\n            else {\n                defines.TWOSIDEDLIGHTING = false;\n            }\n            // We need it to not invert normals in two sided lighting mode (based on the winding of the face)\n            defines.MIRRORED = !!scene._mirroredCameraPosition;\n            defines.SPECULARAA = engine.getCaps().standardDerivatives && this._enableSpecularAntiAliasing;\n        }\n        if (defines._areTexturesDirty || defines._areMiscDirty) {\n            defines.ALPHATESTVALUE = `${this._alphaCutOff}${this._alphaCutOff % 1 === 0 ? \".\" : \"\"}`;\n            defines.PREMULTIPLYALPHA = this.alphaMode === Constants.ALPHA_PREMULTIPLIED || this.alphaMode === Constants.ALPHA_PREMULTIPLIED_PORTERDUFF;\n            defines.ALPHABLEND = this.needAlphaBlendingForMesh(mesh);\n        }\n        if (defines._areImageProcessingDirty && this._imageProcessingConfiguration) {\n            this._imageProcessingConfiguration.prepareDefines(defines);\n        }\n        defines.FORCENORMALFORWARD = this._forceNormalForward;\n        defines.RADIANCEOCCLUSION = this._useRadianceOcclusion;\n        defines.HORIZONOCCLUSION = this._useHorizonOcclusion;\n        if ((this.specularRoughnessAnisotropy > 0.0 || this.coatRoughnessAnisotropy > 0.0) &&\n            OpenPBRMaterial._noiseTextures[scene.uniqueId] &&\n            MaterialFlags.ReflectionTextureEnabled) {\n            // ANISOTROPIC is used to include common shader functions needed for anisotropy\n            // ANISOTROPIC_BASE is used to process anisotropy for the base layer\n            // ANISOTROPIC_COAT is used to process anisotropy for the coat layer\n            defines.ANISOTROPIC = true;\n            if (!mesh.isVerticesDataPresent(VertexBuffer.TangentKind)) {\n                defines._needUVs = true;\n                defines.MAINUV1 = true;\n            }\n            if (this._useGltfStyleAnisotropy) {\n                defines.USE_GLTF_STYLE_ANISOTROPY = true;\n            }\n            defines.ANISOTROPIC_BASE = this.specularRoughnessAnisotropy > 0.0;\n            defines.ANISOTROPIC_COAT = this.coatRoughnessAnisotropy > 0.0;\n        }\n        else {\n            defines.ANISOTROPIC = false;\n            defines.USE_GLTF_STYLE_ANISOTROPY = false;\n            defines.ANISOTROPIC_BASE = false;\n            defines.ANISOTROPIC_COAT = false;\n        }\n        defines.THIN_FILM = this.thinFilmWeight > 0.0;\n        defines.IRIDESCENCE = this.thinFilmWeight > 0.0;\n        defines.FUZZ = this.fuzzWeight > 0 && MaterialFlags.ReflectionTextureEnabled;\n        if (defines.FUZZ) {\n            if (!mesh.isVerticesDataPresent(VertexBuffer.TangentKind)) {\n                defines._needUVs = true;\n                defines.MAINUV1 = true;\n            }\n            this._environmentFuzzBRDFTexture = GetEnvironmentFuzzBRDFTexture(this.getScene());\n            defines.FUZZ_IBL_SAMPLES = this.fuzzSampleNumber;\n        }\n        else {\n            this._environmentFuzzBRDFTexture = null;\n            defines.FUZZENVIRONMENTBRDF = false;\n            defines.FUZZ_IBL_SAMPLES = 0;\n        }\n        // Misc.\n        if (defines._areMiscDirty) {\n            PrepareDefinesForMisc(mesh, scene, this._useLogarithmicDepth, this.pointsCloud, this.fogEnabled, this.needAlphaTestingForMesh(mesh), defines, this._applyDecalMapAfterDetailMap, this._useVertexPulling, renderingMesh, this._isVertexOutputInvariant);\n            defines.UNLIT = this._unlit || ((this.pointsCloud || this.wireframe) && !mesh.isVerticesDataPresent(VertexBuffer.NormalKind));\n            defines.DEBUGMODE = this._debugMode;\n        }\n        // Values that need to be evaluated on every frame\n        PrepareDefinesForFrameBoundValues(scene, engine, this, defines, useInstances ? true : false, useClipPlane, useThinInstances);\n        // External config\n        this._eventInfo.defines = defines;\n        this._eventInfo.mesh = mesh;\n        this._callbackPluginEventPrepareDefinesBeforeAttributes(this._eventInfo);\n        // Attribs\n        PrepareDefinesForAttributes(mesh, defines, true, true, true, this._transparencyMode !== Material.MATERIAL_OPAQUE);\n        // External config\n        this._callbackPluginEventPrepareDefines(this._eventInfo);\n    }\n}\nOpenPBRMaterial._noiseTextures = {};\n/**\n * Force all the PBR materials to compile to glsl even on WebGPU engines.\n * False by default. This is mostly meant for backward compatibility.\n */\nOpenPBRMaterial.ForceGLSL = false;\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"baseWeight\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_baseWeight\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"baseWeightTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_baseWeightTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"baseColor\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_baseColor\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"baseColorTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_baseColorTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"baseDiffuseRoughness\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_baseDiffuseRoughness\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"baseDiffuseRoughnessTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_baseDiffuseRoughnessTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"baseMetalness\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_baseMetalness\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"baseMetalnessTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_baseMetalnessTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularWeight\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularWeight\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularWeightTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularWeightTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularColor\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularColor\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularColorTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularColorTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularRoughness\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularRoughness\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularRoughnessTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularRoughnessTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularRoughnessAnisotropy\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularRoughnessAnisotropy\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularRoughnessAnisotropyTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularRoughnessAnisotropyTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"specularIor\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_specularIor\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatWeight\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatWeight\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatWeightTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatWeightTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatColor\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatColor\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatColorTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatColorTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatRoughness\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatRoughness\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatRoughnessTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatRoughnessTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatRoughnessAnisotropy\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatRoughnessAnisotropy\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatRoughnessAnisotropyTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatRoughnessAnisotropyTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatIor\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatIor\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatDarkening\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatDarkening\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"coatDarkeningTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_coatDarkeningTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"fuzzWeight\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_fuzzWeight\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"fuzzWeightTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_fuzzWeightTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"fuzzColor\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_fuzzColor\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"fuzzColorTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_fuzzColorTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"fuzzRoughness\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_fuzzRoughness\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"fuzzRoughnessTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_fuzzRoughnessTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"geometryNormalTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_geometryNormalTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"geometryTangent\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_geometryTangent\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"geometryTangentTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_geometryTangentTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"geometryCoatNormalTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_geometryCoatNormalTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"geometryCoatTangent\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_geometryCoatTangent\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"geometryCoatTangentTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_geometryCoatTangentTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"geometryOpacity\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_geometryOpacity\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"geometryOpacityTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_geometryOpacityTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"emissionLuminance\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_emissionLuminance\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"emissionColor\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_emissionColor\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"emissionColorTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_emissionColorTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"thinFilmWeight\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_thinFilmWeight\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"thinFilmWeightTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_thinFilmWeightTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"thinFilmThickness\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_thinFilmThickness\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"thinFilmThicknessMin\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_thinFilmThicknessMin\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"thinFilmThicknessTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_thinFilmThicknessTexture\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"thinFilmIor\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_thinFilmIor\", void 0);\n__decorate([\n    addAccessorsForMaterialProperty(\"_markAllSubMeshesAsTexturesDirty\", \"ambientOcclusionTexture\")\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n], OpenPBRMaterial.prototype, \"_ambientOcclusionTexture\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"directIntensity\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"environmentIntensity\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useSpecularWeightFromTextureAlpha\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesAndMiscDirty\")\n], OpenPBRMaterial.prototype, \"forceAlphaTest\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesAndMiscDirty\")\n], OpenPBRMaterial.prototype, \"alphaCutOff\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useAmbientOcclusionFromMetallicTextureRed\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useAmbientInGrayScale\", void 0);\n__decorate([\n    serialize()\n], OpenPBRMaterial.prototype, \"usePhysicalLightFalloff\", null);\n__decorate([\n    serialize()\n], OpenPBRMaterial.prototype, \"useGLTFLightFalloff\", null);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useObjectSpaceNormalMap\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useParallax\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useParallaxOcclusion\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"parallaxScaleBias\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsLightsDirty\")\n], OpenPBRMaterial.prototype, \"disableLighting\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"forceIrradianceInFragment\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsLightsDirty\")\n], OpenPBRMaterial.prototype, \"maxSimultaneousLights\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"invertNormalMapX\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"invertNormalMapY\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"twoSidedLighting\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useAlphaFresnel\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useLinearAlphaFresnel\", void 0);\n__decorate([\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"environmentBRDFTexture\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"forceNormalForward\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"enableSpecularAntiAliasing\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useHorizonOcclusion\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\n], OpenPBRMaterial.prototype, \"useRadianceOcclusion\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsMiscDirty\")\n], OpenPBRMaterial.prototype, \"unlit\", void 0);\n__decorate([\n    serialize(),\n    expandToProperty(\"_markAllSubMeshesAsMiscDirty\")\n], OpenPBRMaterial.prototype, \"applyDecalMapAfterDetailMap\", void 0);\n__decorate([\n    expandToProperty(\"_markAllSubMeshesAsMiscDirty\")\n], OpenPBRMaterial.prototype, \"debugMode\", void 0);\n__decorate([\n    serialize()\n], OpenPBRMaterial.prototype, \"transparencyMode\", null);\nRegisterClass(\"BABYLON.OpenPBRMaterial\", OpenPBRMaterial);\n//# sourceMappingURL=openpbrMaterial.js.map"],"names":["onCreatedEffectParameters","effect","subMesh","Uniform","populateVectorFromLinkedProperties","vector","destinationSize","dimension","propKey","this","linkedProperties","prop","sourceSize","numComponents","targetUniformComponentOffset","Logger","Error","name","value","_tmpArray","toArray","fromArray","constructor","componentNum","Property","defaultValue","targetUniformName","targetUniformComponentNum","Sampler","samplerName","samplerPrefix","samplerInfoName","charAt","toUpperCase","slice","samplerMatrixName","textureDefine","OpenPBRMaterialDefinesBase","UVDefinesMixin","MaterialDefines","OpenPBRMaterialDefines","ImageProcessingDefinesMixin","externalProperties","super","NUM_SAMPLES","REALTIME_FILTERING","IBL_CDF_FILTERING","VERTEXCOLOR","BAKED_VERTEX_ANIMATION_TEXTURE","VERTEXALPHA","ALPHATEST","DEPTHPREPASS","ALPHABLEND","ALPHA_FROM_BASE_COLOR_TEXTURE","ALPHATESTVALUE","PREMULTIPLYALPHA","REFLECTIVITY_GAMMA","REFLECTIVITYDIRECTUV","SPECULARTERM","LODBASEDMICROSFURACE","METALLICWORKFLOW","ROUGHNESSSTOREINMETALMAPALPHA","ROUGHNESSSTOREINMETALMAPGREEN","METALLNESSSTOREINMETALMAPBLUE","AOSTOREINMETALMAPRED","SPECULAR_WEIGHT_IN_ALPHA","SPECULAR_WEIGHT_FROM_SPECULAR_COLOR_TEXTURE","SPECULAR_ROUGHNESS_ANISOTROPY_FROM_TANGENT_TEXTURE","COAT_ROUGHNESS_FROM_GREEN_CHANNEL","COAT_ROUGHNESS_ANISOTROPY_FROM_TANGENT_TEXTURE","USE_GLTF_STYLE_ANISOTROPY","THIN_FILM_THICKNESS_FROM_THIN_FILM_TEXTURE","FUZZ_ROUGHNESS_FROM_TEXTURE_ALPHA","ENVIRONMENTBRDF","ENVIRONMENTBRDF_RGBD","FUZZENVIRONMENTBRDF","NORMAL","TANGENT","OBJECTSPACE_NORMALMAP","PARALLAX","PARALLAX_RHS","PARALLAXOCCLUSION","NORMALXYSCALE","ANISOTROPIC","ANISOTROPIC_OPENPBR","ANISOTROPIC_BASE","ANISOTROPIC_COAT","FUZZ_IBL_SAMPLES","FUZZ","THIN_FILM","IRIDESCENCE","REFLECTION","REFLECTIONMAP_3D","REFLECTIONMAP_SPHERICAL","REFLECTIONMAP_PLANAR","REFLECTIONMAP_CUBIC","USE_LOCAL_REFLECTIONMAP_CUBIC","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_SKYBOX","REFLECTIONMAP_EXPLICIT","REFLECTIONMAP_EQUIRECTANGULAR","REFLECTIONMAP_EQUIRECTANGULAR_FIXED","REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED","INVERTCUBICMAP","USESPHERICALFROMREFLECTIONMAP","USEIRRADIANCEMAP","USE_IRRADIANCE_DOMINANT_DIRECTION","USESPHERICALINVERTEX","REFLECTIONMAP_OPPOSITEZ","LODINREFLECTIONALPHA","GAMMAREFLECTION","RGBDREFLECTION","RADIANCEOCCLUSION","HORIZONOCCLUSION","INSTANCES","THIN_INSTANCES","INSTANCESCOLOR","PREPASS","PREPASS_COLOR","PREPASS_COLOR_INDEX","PREPASS_IRRADIANCE","PREPASS_IRRADIANCE_INDEX","PREPASS_ALBEDO","PREPASS_ALBEDO_INDEX","PREPASS_ALBEDO_SQRT","PREPASS_ALBEDO_SQRT_INDEX","PREPASS_DEPTH","PREPASS_DEPTH_INDEX","PREPASS_SCREENSPACE_DEPTH","PREPASS_SCREENSPACE_DEPTH_INDEX","PREPASS_NORMALIZED_VIEW_DEPTH","PREPASS_NORMALIZED_VIEW_DEPTH_INDEX","PREPASS_NORMAL","PREPASS_NORMAL_INDEX","PREPASS_NORMAL_WORLDSPACE","PREPASS_WORLD_NORMAL","PREPASS_WORLD_NORMAL_INDEX","PREPASS_POSITION","PREPASS_POSITION_INDEX","PREPASS_LOCAL_POSITION","PREPASS_LOCAL_POSITION_INDEX","PREPASS_VELOCITY","PREPASS_VELOCITY_INDEX","PREPASS_VELOCITY_LINEAR","PREPASS_VELOCITY_LINEAR_INDEX","PREPASS_REFLECTIVITY","PREPASS_REFLECTIVITY_INDEX","SCENE_MRT_COUNT","NUM_BONE_INFLUENCERS","BonesPerMesh","BONETEXTURE","BONES_VELOCITY_ENABLED","NONUNIFORMSCALING","MORPHTARGETS","MORPHTARGETS_POSITION","MORPHTARGETS_NORMAL","MORPHTARGETS_TANGENT","MORPHTARGETS_UV","MORPHTARGETS_UV2","MORPHTARGETS_COLOR","MORPHTARGETTEXTURE_HASPOSITIONS","MORPHTARGETTEXTURE_HASNORMALS","MORPHTARGETTEXTURE_HASTANGENTS","MORPHTARGETTEXTURE_HASUVS","MORPHTARGETTEXTURE_HASUV2S","MORPHTARGETTEXTURE_HASCOLORS","NUM_MORPH_INFLUENCERS","MORPHTARGETS_TEXTURE","USEPHYSICALLIGHTFALLOFF","USEGLTFLIGHTFALLOFF","TWOSIDEDLIGHTING","MIRRORED","SHADOWFLOAT","CLIPPLANE","CLIPPLANE2","CLIPPLANE3","CLIPPLANE4","CLIPPLANE5","CLIPPLANE6","POINTSIZE","FOG","LOGARITHMICDEPTH","CAMERA_ORTHOGRAPHIC","CAMERA_PERSPECTIVE","AREALIGHTSUPPORTED","FORCENORMALFORWARD","SPECULARAA","UNLIT","DECAL_AFTER_DETAIL","DEBUGMODE","CLUSTLIGHT_SLICES","CLUSTLIGHT_BATCH","BRDF_V_HEIGHT_CORRELATED","MS_BRDF_ENERGY_CONSERVATION","SPHERICAL_HARMONICS","SPECULAR_GLOSSINESS_ENERGY_CONSERVATION","MIX_IBL_RADIANCE_WITH_IRRADIANCE","LEGACY_SPECULAR_ENERGY_CONSERVATION","BASE_DIFFUSE_MODEL","Constants","MATERIAL_DIFFUSE_MODEL_E_OREN_NAYAR","DIELECTRIC_SPECULAR_MODEL","MATERIAL_DIELECTRIC_SPECULAR_MODEL_OPENPBR","CONDUCTOR_SPECULAR_MODEL","MATERIAL_CONDUCTOR_SPECULAR_MODEL_OPENPBR","rebuild","reset","OpenPBRMaterialBase","ImageProcessingMixin","PushMaterial","OpenPBRMaterial","geometryTangentAngle","Math","atan2","geometryTangent","y","x","Vector2","cos","sin","geometryCoatTangentAngle","geometryCoatTangent","usePhysicalLightFalloff","_lightFalloff","Material","LIGHTFALLOFF_PHYSICAL","_markAllSubMeshesAsTexturesDirty","LIGHTFALLOFF_STANDARD","useGLTFLightFalloff","LIGHTFALLOFF_GLTF","realTimeFiltering","_realTimeFiltering","b","markAsDirty","MATERIAL_TextureDirtyFlag","realTimeFilteringQuality","_realTimeFilteringQuality","n","fuzzSampleNumber","_fuzzSampleNumber","canRenderToMRT","scene","forceGLSL","undefined","ForceGLSL","_baseWeight","_baseWeightTexture","_baseColor","Color3","White","_baseColorTexture","_baseDiffuseRoughness","_baseDiffuseRoughnessTexture","_baseMetalness","_baseMetalnessTexture","_specularWeight","_specularWeightTexture","_specularColor","_specularColorTexture","_specularRoughness","_specularRoughnessTexture","_specularRoughnessAnisotropy","_specularRoughnessAnisotropyTexture","_specularIor","_coatWeight","_coatWeightTexture","_coatColor","_coatColorTexture","_coatRoughness","_coatRoughnessTexture","_coatRoughnessAnisotropy","_coatRoughnessAnisotropyTexture","_coatIor","_coatDarkening","_coatDarkeningTexture","useCoatRoughnessFromWeightTexture","_fuzzWeight","_fuzzWeightTexture","_fuzzColor","_fuzzColorTexture","_fuzzRoughness","_fuzzRoughnessTexture","_geometryNormalTexture","_geometryTangent","_geometryTangentTexture","_geometryCoatNormalTexture","_geometryCoatTangent","_geometryCoatTangentTexture","_geometryOpacity","_geometryOpacityTexture","_emissionLuminance","_emissionColor","Black","_emissionColorTexture","_thinFilmWeight","_thinFilmWeightTexture","_thinFilmThickness","_thinFilmThicknessMin","_thinFilmThicknessTexture","_thinFilmIor","_ambientOcclusionTexture","_uniformsList","_samplersList","_samplerDefines","directIntensity","environmentIntensity","useSpecularWeightFromTextureAlpha","forceAlphaTest","alphaCutOff","useAmbientOcclusionFromMetallicTextureRed","useAmbientInGrayScale","useObjectSpaceNormalMap","useParallax","useParallaxOcclusion","parallaxScaleBias","disableLighting","forceIrradianceInFragment","maxSimultaneousLights","invertNormalMapX","invertNormalMapY","twoSidedLighting","useAlphaFresnel","useLinearAlphaFresnel","environmentBRDFTexture","forceNormalForward","enableSpecularAntiAliasing","useHorizonOcclusion","useRadianceOcclusion","unlit","applyDecalMapAfterDetailMap","_lightingInfos","Vector4","_radianceTexture","_useSpecularWeightFromAlpha","_useSpecularWeightFromSpecularColorTexture","_useSpecularRoughnessAnisotropyFromTangentTexture","_useCoatRoughnessAnisotropyFromTangentTexture","_useCoatRoughnessFromGreenChannel","_useGltfStyleAnisotropy","_useFuzzRoughnessFromTextureAlpha","_useHorizonOcclusion","_useRadianceOcclusion","_useAlphaFromBaseColorTexture","_useAmbientOcclusionFromMetallicTextureRed","_useRoughnessFromMetallicTextureGreen","_useMetallicFromMetallicTextureBlue","_useThinFilmThicknessFromTextureGreen","_useObjectSpaceNormalMap","_useParallax","_useParallaxOcclusion","_parallaxScaleBias","_disableLighting","_maxSimultaneousLights","_invertNormalMapX","_invertNormalMapY","_twoSidedLighting","_alphaCutOff","_useAlphaFresnel","_useLinearAlphaFresnel","_environmentBRDFTexture","_environmentFuzzBRDFTexture","_forceIrradianceInFragment","TEXTURE_FILTERING_QUALITY_LOW","_forceNormalForward","_enableSpecularAntiAliasing","_renderTargets","SmartArray","_unlit","_applyDecalMapAfterDetailMap","_debugMode","_shadersLoaded","_breakShaderLoadedCheck","debugMode","debugLimit","debugFactor","_cacheHasRenderTargetTextures","_transparencyMode","MATERIAL_OPAQUE","getScene","getEngine","isWebGPU","webGLVersion","_noiseTextures","uniqueId","Texture","Tools","GetAssetUrl","TEXTURE_NEAREST_SAMPLINGMODE","onDisposeObservable","addOnce","dispose","_attachImageProcessingConfiguration","getRenderTargetTextures","MaterialFlags","ReflectionTextureEnabled","isRenderTarget","push","_eventInfo","renderTargets","_callbackPluginEventFillRenderTargetTextures","GetEnvironmentBRDFTexture","GetEnvironmentFuzzBRDFTexture","prePassConfiguration","PrePassConfiguration","_propertyList","key","Object","getOwnPropertyNames","keys","forEach","uniform","samplerKey","defineName","type","default","hasRenderTargetTextures","isPrePassCapable","disableDepthWrite","getClassName","transparencyMode","_markAllSubMeshesAsTexturesAndMiscDirty","_shouldUseAlphaFromBaseColorTexture","_hasAlphaChannel","geometryOpacityTexture","baseColorTexture","hasAlpha","clone","cloneTexturesOnlyOnce","rootUrl","SerializationHelper","Clone","id","stencil","copyTo","_clonePlugins","serialize","serializationObject","customType","Parse","source","material","parse","_ParsePlugins","forceCompilation","mesh","onCompiled","options","localOptions","clipPlane","useInstances","_uniformBufferLayoutBuilt","buildUniformLayout","_callbackPluginEventGeneric","defines","defineNames","_prepareEffect","_onEffectCreatedObservable","notifyObservers","isReady","onCompileObservable","add","checkReady","isReadyForSubMesh","drawWrapper","_drawWrapper","isFrozen","_wasPreviouslyReady","_wasPreviouslyUsingInstances","materialDefines","_isReadyForSubMesh","engine","_areTexturesDirty","_callbackPluginEventHasRenderTargetTextures","texturesEnabled","sampler","isReadyOrNotBlocking","radianceTexture","_getRadianceTexture","irradianceTexture","sphericalPolynomial","getInternalTexture","_sphericalPolynomialPromise","_callbackPluginEventIsReadyForSubMesh","_areImageProcessingDirty","_imageProcessingConfiguration","index","lightSources","length","_isReady","getCaps","standardDerivatives","isVerticesDataPresent","VertexBuffer","NormalKind","createNormals","Warn","previousEffect","lightDisposed","_areLightsDisposed","getRenderingMesh","onError","forceWasNotReadyPreviously","allowShaderHotSwapping","markAsUnprocessed","resetCachedMaterial","setEffect","_materialContext","_renderId","getRenderId","_checkScenePerformancePriority","ubo","_uniformBuffer","addUniform","PrepareUniformLayoutForIBL","values","bindForSubMesh","world","_activeEffect","getMeshUniformBuffer","bindToEffect","transferToEffect","MaterialHelperGeometryRendering","Bind","currentRenderPassId","camera","activeCamera","updateFloat4","minZ","maxZ","_callbackPluginEventHardBindForSubMesh","toNormalMatrix","_normalMatrix","bindOnlyNormalMatrix","mustRebind","_mustRebind","visibility","BindBonesParameters","bindViewProjection","useUbo","isSync","_forceRebindOnNextCall","updateFloat2","coordinatesIndex","level","BindTextureMatrix","geometryNormalTexture","_mirroredCameraPosition","BindIBLParameters","pointsCloud","updateFloat","pointSize","TmpVectors","updateVector4","Vector3","updateVector3","emissionLuminance","z","w","setTexture","BindIBLSamplers","useOrderIndependentTransparency","needAlphaBlendingForMesh","depthPeelingRenderer","bind","_callbackPluginEventBindForSubMesh","BindClipPlane","bindEyePosition","_features","needToAlwaysBindUniformBuffers","_needToBindSceneUbo","lightsEnabled","BindLights","fogEnabled","applyFog","fogMode","Scene","FOGMODE_NONE","receiveShadows","bindView","BindFogParameters","BindMorphTargetParameters","bakedVertexAnimationManager","BindLogDepth","_afterBind","update","getAnimatables","results","animations","getActiveTextures","activeTextures","hasTexture","texture","setPrePassRenderer","forceDisposeEffect","forceDisposeTextures","environmentFuzzBRDFTexture","_imageProcessingObserver","onUpdateParameters","remove","environmentTexture","renderingMesh","useClipPlane","_prepareDefines","isDirty","markAsProcessed","fallbacks","EffectFallbacks","fallbackRank","addFallback","HandleFallbacksForShadows","MULTIVIEW","attribs","PositionKind","TangentKind","i","MAX_SUPPORTED_UV_SETS","ColorKind","PrepareAttributesForBones","PrepareAttributesForInstances","PrepareAttributesForMorphTargets","PrepareAttributesForBakedVertexAnimation","shaderName","uniforms","uniformName","samplers","PrepareUniformsAndSamplersForIBL","uniformBuffers","indexParameters","maxSimultaneousMorphTargets","attributes","uniformBuffersNames","customCode","AddUniformsAndSamplers","AddUniforms","AddClipPlaneUniforms","ImageProcessingConfiguration","PrepareUniforms","PrepareSamplers","PrepareUniformsAndSamplersList","uniformsNames","csnrOptions","customShaderNameResolve","join","toString","createEffect","processFinalCode","processCodeAfterIncludes","multiTarget","shaderLanguage","_shaderLanguage","extraInitializationsAsync","async","Promise","all","import","useThinInstances","hasThinInstances","PrepareDefinesForLights","_needNormals","PrepareDefinesForMultiview","oit","PrepareDefinesForPrePass","PrepareDefinesForOIT","PrepareDefines","_needUVs","PrepareDefinesForMergedUV","gammaSpace","useSHInFragment","maxVaryingVectors","PrepareDefinesForIBL","DiffuseTextureEnabled","useRightHandedSystem","isRGBD","backFaceCulling","_areMiscDirty","alphaMode","ALPHA_PREMULTIPLIED","ALPHA_PREMULTIPLIED_PORTERDUFF","prepareDefines","specularRoughnessAnisotropy","coatRoughnessAnisotropy","MAINUV1","thinFilmWeight","fuzzWeight","PrepareDefinesForMisc","_useLogarithmicDepth","needAlphaTestingForMesh","_useVertexPulling","_isVertexOutputInvariant","wireframe","PrepareDefinesForFrameBoundValues","_callbackPluginEventPrepareDefinesBeforeAttributes","PrepareDefinesForAttributes","_callbackPluginEventPrepareDefines","__decorate","addAccessorsForMaterialProperty","prototype","expandToProperty","RegisterClass"],"mappings":"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"}