{"version":3,"file":"EXT_lights_area-8sjwEc95.esm.js","sources":["../../../../../dev/core/dist/Lights/LTC/ltcTextureTool.js","../../../../../dev/core/dist/Lights/areaLight.js","../../../../../dev/core/dist/Lights/rectAreaLight.js","../../../../../dev/loaders/dist/glTF/2.0/Extensions/EXT_lights_area.js"],"sourcesContent":["import { Tools } from \"core/Misc/tools\";\n/**\n * Loads LTC texture data from Babylon.js CDN.\n * @returns Promise with data for LTC1 and LTC2 textures for area lights.\n */\nexport async function DecodeLTCTextureDataAsync() {\n    const ltc1 = new Uint16Array(64 * 64 * 4);\n    const ltc2 = new Uint16Array(64 * 64 * 4);\n    const file = await Tools.LoadFileAsync(Tools.GetAssetUrl(\"https://assets.babylonjs.com/core/areaLights/areaLightsLTC.bin\"));\n    const ltcEncoded = new Uint16Array(file);\n    const pixelCount = ltcEncoded.length / 8;\n    for (let pixelIndex = 0; pixelIndex < pixelCount; pixelIndex++) {\n        ltc1[pixelIndex * 4] = ltcEncoded[pixelIndex * 8];\n        ltc1[pixelIndex * 4 + 1] = ltcEncoded[pixelIndex * 8 + 1];\n        ltc1[pixelIndex * 4 + 2] = ltcEncoded[pixelIndex * 8 + 2];\n        ltc1[pixelIndex * 4 + 3] = ltcEncoded[pixelIndex * 8 + 3];\n        ltc2[pixelIndex * 4] = ltcEncoded[pixelIndex * 8 + 4];\n        ltc2[pixelIndex * 4 + 1] = ltcEncoded[pixelIndex * 8 + 5];\n        ltc2[pixelIndex * 4 + 2] = ltcEncoded[pixelIndex * 8 + 6];\n        ltc2[pixelIndex * 4 + 3] = ltcEncoded[pixelIndex * 8 + 7];\n    }\n    return [ltc1, ltc2];\n}\n//# sourceMappingURL=ltcTextureTool.js.map","import { RawTexture } from \"core/Materials/Textures/rawTexture\";\nimport { Texture } from \"core/Materials/Textures/texture\";\nimport { Constants } from \"core/Engines/constants\";\nimport { Light } from \"core/Lights/light\";\nimport { DecodeLTCTextureDataAsync } from \"core/Lights/LTC/ltcTextureTool\";\nimport { Logger } from \"core/Misc/logger\";\nfunction CreateSceneLTCTextures(scene) {\n    const useDelayedTextureLoading = scene.useDelayedTextureLoading;\n    scene.useDelayedTextureLoading = false;\n    const previousState = scene._blockEntityCollection;\n    scene._blockEntityCollection = false;\n    scene._ltcTextures = {\n        LTC1: RawTexture.CreateRGBATexture(null, 64, 64, scene.getEngine(), false, false, Constants.TEXTURE_LINEAR_LINEAR, Constants.TEXTURETYPE_HALF_FLOAT, 0, false, true),\n        LTC2: RawTexture.CreateRGBATexture(null, 64, 64, scene.getEngine(), false, false, Constants.TEXTURE_LINEAR_LINEAR, Constants.TEXTURETYPE_HALF_FLOAT, 0, false, true),\n    };\n    scene._blockEntityCollection = previousState;\n    scene._ltcTextures.LTC1.wrapU = Texture.CLAMP_ADDRESSMODE;\n    scene._ltcTextures.LTC1.wrapV = Texture.CLAMP_ADDRESSMODE;\n    scene._ltcTextures.LTC2.wrapU = Texture.CLAMP_ADDRESSMODE;\n    scene._ltcTextures.LTC2.wrapV = Texture.CLAMP_ADDRESSMODE;\n    scene.useDelayedTextureLoading = useDelayedTextureLoading;\n    DecodeLTCTextureDataAsync()\n        // eslint-disable-next-line github/no-then\n        .then((textureData) => {\n        if (scene._ltcTextures) {\n            const ltc1 = scene._ltcTextures?.LTC1;\n            ltc1.update(textureData[0]);\n            const ltc2 = scene._ltcTextures?.LTC2;\n            ltc2.update(textureData[1]);\n            scene.onDisposeObservable.addOnce(() => {\n                scene._ltcTextures?.LTC1.dispose();\n                scene._ltcTextures?.LTC2.dispose();\n            });\n        }\n    })\n        // eslint-disable-next-line github/no-then\n        .catch((error) => {\n        Logger.Error(`Area Light fail to get LTC textures data. Error: ${error}`);\n    });\n}\n/**\n * Abstract Area Light class that servers as parent for all Area Lights implementations.\n * The light is emitted from the area in the -Z direction.\n */\nexport class AreaLight extends Light {\n    /**\n     * Creates a area light object.\n     * Documentation : https://doc.babylonjs.com/features/featuresDeepDive/lights/lights_introduction\n     * @param name The friendly name of the light\n     * @param position The position of the area light.\n     * @param scene The scene the light belongs to\n     */\n    constructor(name, position, scene) {\n        super(name, scene);\n        this.position = position;\n        if (!this._scene._ltcTextures) {\n            CreateSceneLTCTextures(this._scene);\n        }\n    }\n    transferTexturesToEffect(effect) {\n        if (this._scene._ltcTextures) {\n            effect.setTexture(\"areaLightsLTC1Sampler\", this._scene._ltcTextures.LTC1);\n            effect.setTexture(\"areaLightsLTC2Sampler\", this._scene._ltcTextures.LTC2);\n        }\n        return this;\n    }\n    /**\n     * Prepares the list of defines specific to the light type.\n     * @param defines the list of defines\n     * @param lightIndex defines the index of the light for the effect\n     */\n    prepareLightSpecificDefines(defines, lightIndex) {\n        defines[\"AREALIGHT\" + lightIndex] = true;\n        defines[\"AREALIGHTUSED\"] = true;\n    }\n    _isReady() {\n        if (this._scene._ltcTextures) {\n            return this._scene._ltcTextures.LTC1.isReady() && this._scene._ltcTextures.LTC2.isReady();\n        }\n        return false;\n    }\n}\n//# sourceMappingURL=areaLight.js.map","import { __decorate } from \"tslib\";\nimport { Vector3 } from \"../Maths/math.vector\";\nimport { Node } from \"../node\";\nimport { Light } from \"./light\";\nimport { RegisterClass } from \"core/Misc/typeStore\";\nimport { serialize } from \"../Misc/decorators\";\nimport { AreaLight } from \"./areaLight\";\nNode.AddNodeConstructor(\"Light_Type_4\", (name, scene) => {\n    return () => new RectAreaLight(name, Vector3.Zero(), 1, 1, scene);\n});\n/**\n * A rectangular area light defined by an unique point in world space, a width and a height.\n * The light is emitted from the rectangular area in the -Z direction.\n */\nexport class RectAreaLight extends AreaLight {\n    /**\n     * Rect Area Light width.\n     */\n    get width() {\n        return this._width.x;\n    }\n    /**\n     * Rect Area Light width.\n     */\n    set width(value) {\n        this._width.x = value;\n    }\n    /**\n     * Rect Area Light height.\n     */\n    get height() {\n        return this._height.y;\n    }\n    /**\n     * Rect Area Light height.\n     */\n    set height(value) {\n        this._height.y = value;\n    }\n    /**\n     * Creates a rectangular area light object.\n     * Documentation : https://doc.babylonjs.com/features/featuresDeepDive/lights/lights_introduction\n     * @param name The friendly name of the light\n     * @param position The position of the area light.\n     * @param width The width of the area light.\n     * @param height The height of the area light.\n     * @param scene The scene the light belongs to\n     */\n    constructor(name, position, width, height, scene) {\n        super(name, position, scene);\n        this._width = new Vector3(width, 0, 0);\n        this._height = new Vector3(0, height, 0);\n        this._pointTransformedPosition = Vector3.Zero();\n        this._pointTransformedWidth = Vector3.Zero();\n        this._pointTransformedHeight = Vector3.Zero();\n    }\n    /**\n     * Returns the string \"RectAreaLight\"\n     * @returns the class name\n     */\n    getClassName() {\n        return \"RectAreaLight\";\n    }\n    /**\n     * Returns the integer 4.\n     * @returns The light Type id as a constant defines in Light.LIGHTTYPEID_x\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    getTypeID() {\n        return Light.LIGHTTYPEID_RECT_AREALIGHT;\n    }\n    _buildUniformLayout() {\n        this._uniformBuffer.addUniform(\"vLightData\", 4);\n        this._uniformBuffer.addUniform(\"vLightDiffuse\", 4);\n        this._uniformBuffer.addUniform(\"vLightSpecular\", 4);\n        this._uniformBuffer.addUniform(\"vLightWidth\", 4);\n        this._uniformBuffer.addUniform(\"vLightHeight\", 4);\n        this._uniformBuffer.addUniform(\"shadowsInfo\", 3);\n        this._uniformBuffer.addUniform(\"depthValues\", 2);\n        this._uniformBuffer.create();\n    }\n    _computeTransformedInformation() {\n        if (this.parent && this.parent.getWorldMatrix) {\n            Vector3.TransformCoordinatesToRef(this.position, this.parent.getWorldMatrix(), this._pointTransformedPosition);\n            Vector3.TransformNormalToRef(this._width, this.parent.getWorldMatrix(), this._pointTransformedWidth);\n            Vector3.TransformNormalToRef(this._height, this.parent.getWorldMatrix(), this._pointTransformedHeight);\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Sets the passed Effect \"effect\" with the PointLight transformed position (or position, if none) and passed name (string).\n     * @param effect The effect to update\n     * @param lightIndex The index of the light in the effect to update\n     * @returns The point light\n     */\n    transferToEffect(effect, lightIndex) {\n        const offset = this._scene.floatingOriginOffset;\n        if (this._computeTransformedInformation()) {\n            this._uniformBuffer.updateFloat4(\"vLightData\", this._pointTransformedPosition.x - offset.x, this._pointTransformedPosition.y - offset.y, this._pointTransformedPosition.z - offset.z, 0, lightIndex);\n            this._uniformBuffer.updateFloat4(\"vLightWidth\", this._pointTransformedWidth.x / 2, this._pointTransformedWidth.y / 2, this._pointTransformedWidth.z / 2, 0, lightIndex);\n            this._uniformBuffer.updateFloat4(\"vLightHeight\", this._pointTransformedHeight.x / 2, this._pointTransformedHeight.y / 2, this._pointTransformedHeight.z / 2, 0, lightIndex);\n        }\n        else {\n            this._uniformBuffer.updateFloat4(\"vLightData\", this.position.x - offset.x, this.position.y - offset.y, this.position.z - offset.z, 0, lightIndex);\n            this._uniformBuffer.updateFloat4(\"vLightWidth\", this._width.x / 2, this._width.y / 2, this._width.z / 2, 0.0, lightIndex);\n            this._uniformBuffer.updateFloat4(\"vLightHeight\", this._height.x / 2, this._height.y / 2, this._height.z / 2, 0.0, lightIndex);\n        }\n        return this;\n    }\n    transferToNodeMaterialEffect(effect, lightDataUniformName) {\n        const offset = this._scene.floatingOriginOffset;\n        if (this._computeTransformedInformation()) {\n            effect.setFloat3(lightDataUniformName, this._pointTransformedPosition.x - offset.x, this._pointTransformedPosition.y - offset.y, this._pointTransformedPosition.z - offset.z);\n        }\n        else {\n            effect.setFloat3(lightDataUniformName, this.position.x - offset.x, this.position.y - offset.y, this.position.z - offset.z);\n        }\n        return this;\n    }\n}\n__decorate([\n    serialize()\n], RectAreaLight.prototype, \"width\", null);\n__decorate([\n    serialize()\n], RectAreaLight.prototype, \"height\", null);\n// Register Class Name\nRegisterClass(\"BABYLON.RectAreaLight\", RectAreaLight);\n//# sourceMappingURL=rectAreaLight.js.map","import { Vector3, Quaternion } from \"core/Maths/math.vector\";\nimport { Color3 } from \"core/Maths/math.color\";\nimport { Light } from \"core/Lights/light\";\nimport { RectAreaLight } from \"core/Lights/rectAreaLight\";\nimport { TransformNode as BabylonTransformNode } from \"core/Meshes/transformNode\";\nimport { GLTFLoader, ArrayItem } from \"../glTFLoader\";\nimport { registerGLTFExtension, unregisterGLTFExtension } from \"../glTFLoaderExtensionRegistry\";\nconst NAME = \"EXT_lights_area\";\n/**\n * [Specification](https://github.com/KhronosGroup/glTF/blob/main/extensions/2.0/Vendor/EXT_lights_area/README.md)\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport class EXT_lights_area {\n    /**\n     * @internal\n     */\n    constructor(loader) {\n        /**\n         * The name of this extension.\n         */\n        this.name = NAME;\n        this._loader = loader;\n        this.enabled = this._loader.isExtensionUsed(NAME);\n    }\n    /** @internal */\n    dispose() {\n        this._loader = null;\n        delete this._lights;\n    }\n    /** @internal */\n    onLoading() {\n        const extensions = this._loader.gltf.extensions;\n        if (extensions && extensions[this.name]) {\n            const extension = extensions[this.name];\n            this._lights = extension.lights;\n            ArrayItem.Assign(this._lights);\n        }\n    }\n    /**\n     * @internal\n     */\n    // eslint-disable-next-line no-restricted-syntax\n    loadNodeAsync(context, node, assign) {\n        return GLTFLoader.LoadExtensionAsync(context, node, this.name, async (extensionContext, extension) => {\n            this._loader._allMaterialsDirtyRequired = true;\n            return await this._loader.loadNodeAsync(context, node, (babylonMesh) => {\n                let babylonLight;\n                const light = ArrayItem.Get(extensionContext, this._lights, extension.light);\n                const name = light.name || babylonMesh.name;\n                this._loader.babylonScene._blockEntityCollection = !!this._loader._assetContainer;\n                const size = light.size !== undefined ? light.size : 1.0;\n                switch (light.type) {\n                    case \"rect\" /* EXTLightsArea_LightType.RECT */: {\n                        const width = light.rect?.aspect !== undefined ? light.rect.aspect * size : size;\n                        const height = size;\n                        const babylonRectAreaLight = new RectAreaLight(name, Vector3.Zero(), width, height, this._loader.babylonScene);\n                        babylonLight = babylonRectAreaLight;\n                        break;\n                    }\n                    case \"disk\" /* EXTLightsArea_LightType.DISK */: {\n                        // For disk lights, we'll use a rectangle light with the same area to approximate the disk light\n                        // In the future, this could be extended to support actual disk area lights\n                        const newSize = Math.sqrt(size * size * 0.25 * Math.PI); // Area of the disk\n                        const babylonRectAreaLight = new RectAreaLight(name, Vector3.Zero(), newSize, newSize, this._loader.babylonScene);\n                        babylonLight = babylonRectAreaLight;\n                        break;\n                    }\n                    default: {\n                        this._loader.babylonScene._blockEntityCollection = false;\n                        throw new Error(`${extensionContext}: Invalid area light type (${light.type})`);\n                    }\n                }\n                babylonLight._parentContainer = this._loader._assetContainer;\n                this._loader.babylonScene._blockEntityCollection = false;\n                light._babylonLight = babylonLight;\n                babylonLight.falloffType = Light.FALLOFF_GLTF;\n                babylonLight.diffuse = light.color ? Color3.FromArray(light.color) : Color3.White();\n                babylonLight.intensity = light.intensity == undefined ? 1 : light.intensity;\n                // glTF EXT_lights_area specifies lights face down -Z, but Babylon.js area lights face down +Z\n                // Create a parent transform node with 180-degree rotation around Y axis to flip the direction\n                const lightParentNode = new BabylonTransformNode(`${name}_orientation`, this._loader.babylonScene);\n                lightParentNode.rotationQuaternion = Quaternion.RotationAxis(Vector3.Up(), Math.PI);\n                lightParentNode.parent = babylonMesh;\n                babylonLight.parent = lightParentNode;\n                this._loader._babylonLights.push(babylonLight);\n                GLTFLoader.AddPointerMetadata(babylonLight, extensionContext);\n                assign(babylonMesh);\n            });\n        });\n    }\n}\nunregisterGLTFExtension(NAME);\nregisterGLTFExtension(NAME, true, (loader) => new EXT_lights_area(loader));\n//# sourceMappingURL=EXT_lights_area.js.map"],"names":["BabylonTransformNode"],"mappings":"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"}